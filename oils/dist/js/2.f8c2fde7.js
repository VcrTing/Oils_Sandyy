"use strict";(self["webpackChunkoils"]=self["webpackChunkoils"]||[]).push([[2],{8384:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("ul",{staticClass:"pager px-0 an_upper"},[s("li",{on:{click:function(s){return t._next(t.now-1)}}},[t._v("上一頁")]),s("li",{staticClass:"px-2 ml-1",on:{click:function(s){return t._next(1)}}},[s("v-icon",{staticClass:"qiong-txt-14"},[t._v("mdi-chevron-double-left")])],1),s("li",{staticClass:"pager_fly"},[s("input",{attrs:{type:"text",id:"inpREF"},domProps:{value:t.now},on:{change:function(s){return t.go()}}}),s("span",[t._v("/ "+t._s(t.pages))])]),s("li",{staticClass:"px-2 mr-1",on:{click:function(s){return t._next(t.pages)}}},[s("v-icon",{staticClass:"qiong-txt-14"},[t._v("mdi-chevron-double-right")])],1),s("li",{on:{click:function(s){return t._next(t.now+1)}}},[t._v("下一頁")])])},n=[],a={props:{_count:Number,_limit:Number},data(){return{now:1}},watch:{now(t,s){this.$emit("page_Father",(t-1)*this._limit,this._limit*t)}},computed:{pages(){let t=Math.ceil(this._count/this._limit);return t=t||1,t}},methods:{go(t=null){t=t||document.getElementById("inpREF").value,this._next(t)},_next(t){t=null!=t?t:1,t=isNaN(t)?1:t,t=t<=0?this.pages:t,t=t>this.pages?1:t,this.now=t,document.getElementById("inpREF").value=t}}},o=a,r=e(1001),l=(0,r.Z)(o,i,n,!1,null,null,null),c=l.exports},2769:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("div")},n=[],a={name:"",data(){return{}},methods:{async lunch(t){const s=this.view.getToday();if(t=t||{date_lte:s},t["_sort"]="date:DESC",t["_limit"]=300,t=await this.conn.get(this.api.browse_log_stock,this.$store.state.token,t),t&&t.message)return t.message}}},o=a,r=e(1001),l=(0,r.Z)(o,i,n,!1,null,"59e48e8f",null),c=l.exports},1304:function(t,s,e){e.d(s,{Z:function(){return d}});var i=function(){var t=this,s=t._self._c;return s("div",[s("v-row",{staticClass:"qiong-panel_element qpe-mh mobie-panel",class:t.extra_class},[s("v-col",{staticClass:"px-0 qpe_inner py-0",attrs:{cols:t.cols}},[t._t("default")],2),t.need_space?s("v-col",{staticClass:"inner-empty"},[s("qiong-space",{attrs:{space:"7vh"}},[t._v(" ")])],1):t._e()],1)],1)},n=[],a=e(934),o=e(7667),r={name:"",props:{need_space:{type:Boolean,default:!0},cols:{type:Number,default:12},extra_class:{type:String}},components:{QiongSpace:a.Z,QiongPageLing:o.Z},data(){return{}}},l=r,c=e(1001),u=(0,c.Z)(l,i,n,!1,null,"94a8aac0",null),d=u.exports},6309:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"form-wrapper"},[s("div",{staticClass:"form-input"},[s("label",{class:t.ex_class},[t._t("default")],2),s("input",{directives:[{name:"model",rawName:"v-model",value:t.v,expression:"v"}],staticClass:"input-beauty",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.v},on:{input:function(s){s.target.composing||(t.v=s.target.value)}}})])])},n=[],a={name:"",props:{placeholder:String,ex_class:{type:String,default:"pr-1"}},data(){return{v:""}},methods:{value(){return this.v=this.v?this.v:"",this.v.trim()},def(t){this.v=t}}},o=a,r=e(1001),l=(0,r.Z)(o,i,n,!1,null,"081344b4",null),c=l.exports},405:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"txt-res pt-1"},[1==t._bigger?s("div",{staticClass:"qiong-td fw-b qiong-txt-16 fx-r"},[s("div",{staticClass:"qiong-wide-18 mobie-wide-28 pr-0"},[t._t("content")],2),s("div",{staticClass:"qiong-wide-32 mobie-wide-72 pr-0"},[t._t("txt"),s("span",{staticClass:""},[t._v(" ")])],2),s("div",{staticClass:"qiong-wide-50 mobie-hide"},[t._v(" ")])]):s("div",{staticClass:"qiong-td fw-b qiong-txt-16 my-0 py-0"},[s("div",{staticClass:"qiong-wide-60 mobie-hide"},[t._v(" ")]),s("div",{staticClass:"qiong-wide-30 mobie-wide-80 pr-0"},[t._t("txt"),s("span",{staticClass:""},[t._v(" ")])],2),s("div",{staticClass:"qiong-wide-10 mobie-wide-20 pr-0"},[t._t("content")],2)])])},n=[],a={name:"",props:{_bigger:{type:Number,default:1}}},o=a,r=e(1001),l=(0,r.Z)(o,i,n,!1,null,null,null),c=l.exports},4359:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return 1==t.bigger?s("v-row",{staticClass:"pager-header"},[s("v-col",{staticClass:"pl-7",class:t.extra_calss,attrs:{cols:12,sm:4}},[t._t("header")],2),s("v-col",{staticClass:"px-7 fx-r0",class:t.extra_calss,attrs:{cols:12,sm:8}},[t._t("filter")],2)],1):s("v-row",{staticClass:"pager-header"},[s("v-col",{staticClass:"pl-7",class:t.extra_calss,attrs:{cols:12,sm:6}},[t._t("header")],2),s("v-col",{staticClass:"px-7 fx-r0",class:t.extra_calss,attrs:{cols:12,sm:6}},[t._t("filter")],2)],1)},n=[],a={components:{},name:"",props:{bigger:{type:Number,default:1},extra_calss:{type:String}},data(){return{}}},o=a,r=e(1001),l=(0,r.Z)(o,i,n,!1,null,"34ab2fbb",null),c=l.exports},1204:function(t,s,e){e.d(s,{Z:function(){return p}});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"pb-3 fs-r"},[t.need_line?s("div",[1==t.bigger?s("qiong-page-ling"):s("qiong-page-ling",{attrs:{ex_class:"qiong-lineXL"}})],1):t._e(),s("qiong-space",{attrs:{space:"0.2vw"}}),s("qiong-space",{attrs:{space:"0.5vh"}}),s("div",{},[t._t("default")],2),1==t.bigger?s("div",t._l(t.res,(function(e,i){return s("qsr-wrapper",{key:i,attrs:{_bigger:t.bigger}},[s("span",{attrs:{slot:"txt"},slot:"txt"},[t._v(t._s(e.txt)+" ")]),s("span",{attrs:{slot:"content"},domProps:{innerHTML:t._s(e.content)},slot:"content"})])})),1):s("div",{},t._l(t.res,(function(e,i){return s("qsr-wrapper",{key:i,attrs:{_bigger:t.bigger}},[s("span",{attrs:{slot:"txt"},slot:"txt"},[t._v(t._s(e.txt))]),s("span",{attrs:{slot:"content"},domProps:{innerHTML:t._s(e.content)},slot:"content"})])})),1),s("qiong-space",{attrs:{space:"0.2vw"}}),s("qiong-space",{attrs:{space:"0.7vh"}})],1)},n=[],a=e(7667),o=e(934),r=e(405),l={props:{res:{type:Array},bigger:{type:Number,default:1},need_line:{type:Boolean,default:!0}},name:"",components:{QiongPageLing:a.Z,QiongSpace:o.Z,QsrWrapper:r.Z},data(){return{test:[{txt:"獎金",content:"HK&nbsp;135.0"},{txt:"獎金",content:"HK&nbsp;135.0"}]}},mounted(){}},c=l,u=e(1001),d=(0,u.Z)(c,i,n,!1,null,"353118a5",null),p=d.exports},7667:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("v-col",{staticClass:"py-0 ma-0 pa-0",attrs:{cols:"12"}},[s("div",{staticClass:"qiong-line",class:t.ex_class})])},n=[],a={name:"",props:{ex_class:{type:String}},data(){return{}}},o=a,r=e(1001),l=(0,r.Z)(o,i,n,!1,null,"8711cf2c",null),c=l.exports},6838:function(t,s,e){e.d(s,{Z:function(){return u}});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"qiong-img-wrapper"},[t.src?s("div",{staticClass:"qiong-img fx-c"},[s("img",{attrs:{src:t.src}})]):s("div",{staticClass:"qiong-img-empty fx-c"},[s("v-icon",[t._v("mdi-close")])],1)])},n=[],a=e(6481),o={components:{QiongLoading:a.Z},props:{src:{type:String}},name:"",data(){return{}}},r=o,l=e(1001),c=(0,l.Z)(r,i,n,!1,null,"28382b09",null),u=c.exports},8304:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("div",{domProps:{innerHTML:t._s(t.named)}})},n=[],a={name:"",props:{id:{type:Number},product:{type:Object}},data(){return{named:"&nbsp;"}},computed:{},async mounted(){this.$store.state.products&&(this.named=await this.nameFind())},methods:{nameFind(){const t=this;return new Promise(((s,e)=>{let i="";const n=t.$store.state.products;n.map((s=>{s.id==t.product.id&&(s.translation&&s.translation.length>1?s.translation.map((s=>{s.language_key.toUpperCase()==t.$store.state.lang&&(i=s.product_name)})):i=s.translation[0].product_name)})),s(i)}))}}},o=a,r=e(1001),l=(0,r.Z)(o,i,n,!1,null,null,null),c=l.exports},9190:function(t,s,e){e.r(s),e.d(s,{default:function(){return ls}});var i=function(){var t=this,s=t._self._c;return s("v-container",{staticClass:"qiong-txt-td",attrs:{fluid:""}},[s("stock-top-bar",{ref:"topBarREF",attrs:{_funnl:t.funnl},on:{submit_Father:t.stockLoading}}),s("qiong-header-filter",{staticClass:"bg-none mt-0"},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("庫存操作記錄")]),s("div",{attrs:{slot:"filter"},slot:"filter"},[s("stock-top-filter",{on:{plus_Father:function(s){t.plus=!0}}})],1)]),s("qiong-panel-element",{staticClass:"mobie-table",attrs:{need_space:!1}},[s("div",{staticClass:"ps-r"},[s("stock-records-logo-header",{staticClass:"px-7",attrs:{_plus:t.plus},on:{sort:t.sortRecords}}),t.plus?s("pro-stock-plus",{class:{"iitw-active":t.plus,"iitw-hide":!t.plus},on:{cancel_Father:()=>t.plus=!1,refresh:t.plusFinish}}):t._e()],1),t.loading?s("qiong-loading",{staticClass:"qiong-mt-20",attrs:{bigger:1}}):s("stock-records-expanel",{attrs:{records:t.logos}}),s("qiong-space",{attrs:{space:"2vw"}})],1),s("div",{staticClass:"fx-c mt-3 qiong-pt-10"},[t.loading?t._e():s("pagenation",{ref:"pageREF",attrs:{_limit:t.limit,_count:t.count},on:{page_Father:t.sliceData}})],1),s("qiong-space",{attrs:{space:"7vh"}}),s("table-pager-footer"),s("widget-count",{ref:"countREF"}),s("widget-logo-stock",{ref:"stockREF"})],1)},n=[],a=e(2769),o=e(1304),r=e(4221),l=function(){var t=this,s=t._self._c;return t.items&&t.items.length>0?s("div",t._l(t.items,(function(e,i){return s("div",{key:i,staticClass:"qiong-td td-center"},[s("div",{staticClass:"qiong-wide-5 tb-in-img"},[e.product?s("img",{staticClass:"img",attrs:{src:e.product.product_image}}):t._e()]),s("div",{staticClass:"qiong-wide-13 pl-2"},[t._v(" "+t._s(e.product.sku)+" ")]),s("div",{staticClass:"qiong-wide-17 pl-2"},[e.product?s("product-name-viewing",{attrs:{product:e.product}}):t._e()],1),s("div",{staticClass:"qiong-wide-9"},[t._v(" "+t._s(e.order)+" ")]),s("div",{staticClass:"qiong-wide-8"},[e.stock_location?s("company-named-viewing",{staticClass:"qiong-txt-10",attrs:{named:e.stock_location}}):t._e()],1),s("div",{staticClass:"qiong-wide-7"},[t._v(" "+t._s(e.original_quantity)+"  "),e.original_quantity<=0?s("span",{class:{num_less:e.original_quantity<=0}},[t._v("（缺貨）")]):t._e()]),s("div",{staticClass:"qiong-wide-8 pl-2"},[t._v(" "+t._s(e.difference)+" ")]),s("div",{staticClass:"qiong-wide-10"}),s("div",{staticClass:"qiong-wide-12"},[t._v(" "+t._s(t.view.ser_timed(e.date,!1,!1))+" ")]),s("div",{staticClass:"qiong-wide-10"})])})),0):s("qiong-empty",{staticClass:"qiong-pt-20"})},c=[],u=e(3233),d=e(7126),p=e(8304),v={name:"",components:{CompanyNamedViewing:d.Z,ProductNameViewing:p.Z,QiongEmpty:u.Z},props:{items:Array}},_=v,g=e(1001),m=(0,g.Z)(_,l,c,!1,null,"be64d152",null),h=m.exports,f=function(){var t=this,s=t._self._c;return s("ul",{staticClass:"pager"},[s("li",{staticClass:"btn-filter",on:{click:function(s){return t._next(t.now-1)}}},[t._v("上一页")]),s("li",{staticClass:"btn-filter pager_fly"},[s("input",{attrs:{type:"text",id:"inpREF"},domProps:{value:t.now},on:{change:function(s){return t.go()}}}),s("span",[t._v("/ "+t._s(t.pages))])]),s("li",{staticClass:"btn-filter",on:{click:function(s){return t._next(t.now+1)}}},[t._v("下一页")])])},w=[],C={name:"",props:{_count:Number,_limit:Number},data(){return{now:1,pages:0}},mounted(){this._num_pages()},watch:{now(t,s){this.$emit("page_Father",(t-1)*this._limit,this._limit*t)}},methods:{_num_pages(){let t=Math.ceil(this._count/this._limit);this.pages=t||1},go(t=null){t=t||document.getElementById("inpREF").value,this._next(t)},_next(t){t=null!=t?t:1,t=isNaN(t)?1:t,t=t<=0?this.pages:t,t=t>this.pages?1:t,this.now=t,document.getElementById("inpREF").value=t}}},x=C,q=(0,g.Z)(x,f,w,!1,null,"4311571e",null),b=q.exports,y=function(){var t=this,s=t._self._c;return s("div",{staticClass:"qiong-tr qiong-txt-tr pager-header-in-table"},[s("div",{staticClass:"qiong-wide-5"},[t._v("   ")]),s("div",{staticClass:"qiong-wide-13 pl-2"},[t._v(" SKU ")]),s("div",{staticClass:"qiong-wide-17 pl-2"},[t._v(" 產品中文名 ")]),s("div",{staticClass:"qiong-wide-9"},[t._v(" 所屬訂單 ")]),s("div",{staticClass:"qiong-wide-8"},[t._v(" 取貨倉庫 ")]),s("div",{staticClass:"qiong-wide-7"},[t._v(" 原庫存 ")]),s("div",{staticClass:"qiong-wide-8 pl-2"},[t._v(" 變更量 ")]),s("div",{staticClass:"qiong-wide-10"},[t._v(" 操作類型 ")]),t._plus?t._e():s("div",{staticClass:"qiong-wide-12"},[t._v(" 處理時間 "),s("v-icon",{staticClass:"qiong-txt-16 hand",class:{rote:!t.timed,"txt-sus":t.timed},on:{click:function(s){t.timed=!t.timed}}},[t._v("mdi-sort-reverse-variant")])],1),s("div",{staticClass:"qiong-wide-10"},[t._v(" 備註 ")])])},k=[],Z=e(6797),F=e.n(Z),E={name:"",props:["_plus"],data(){return{timed:!0}},watch:{timed(t,s){this.sortTimed(t)}},methods:{sortTimed(t){this.$emit("sort",((s,e)=>e.sort(((s,e)=>t?F()(e.date).diff(s.date):F()(s.date).diff(e.date)))))}}},R=E,N=(0,g.Z)(R,y,k,!1,null,"c40180b0",null),P=N.exports,S=function(){var t=this,s=t._self._c;return s("v-row",{staticClass:"bar-filter px-7 my-1"},[s("div",{staticClass:"mobie-show pt-3"}),s("div",{staticClass:"v_col qiong-pt-15"},[s("div",{staticClass:"d-ib"},[s("label",[t._v("處理日期")]),s("div",{staticClass:"input-time"},[t.loading?s("input",{attrs:{type:"text",placeholder:"起始時間"}}):s("date-select",{attrs:{date:t.funnel.date_gte},on:{timed_Father:s=>t.funnel.date_gte=s}})],1),s("span",{staticClass:"bf_sub"},[t._v("至")]),s("div",{staticClass:"input-time"},[t.loading?s("input",{attrs:{type:"text",placeholder:"結束時間"}}):s("date-select",{attrs:{date:t.funnel.date_lt},on:{timed_Father:s=>t.funnel.date_lt=s}})],1)]),s("div",{staticClass:"mobie-show pt-4"}),s("line-form-wrapper",{ref:"nameInput",staticClass:"pc-pl-4",attrs:{placeholder:"中文或英文均可"}},[t._v(" 產品名稱： ")]),s("div",{staticClass:"mobie-show pt-4"}),s("button",{staticClass:"submit",on:{click:t.submit}},[s("v-icon",[t._v("mdi-filter-outline")]),t._v(" 篩選 ")],1),s("button",{staticClass:"txt-acc_sub",on:{click:t.reset}},[s("v-icon",[t._v("mdi-reload")]),t._v(" 重置 ")],1)],1)])},$=[],T=e(4711),I=e(6309),Q={components:{DateSelect:T.Z,LineFormWrapper:I.Z},name:"",props:{_funnl:Object},data(){return{funnel:{user:"",named:"",date_gte:"",date_lt:""},loading:!0}},mounted(){this.reset()},methods:{fresh(){},submit(){let t={};this.funnel.named=this.$refs.nameInput.value();for(let s in this.funnel)this.funnel[s]&&("named"==s?t["product.translation_contains"]=this.funnel[s]:t[s]=this.funnel[s]);this.$emit("submit_Father",t)},reset(){this.$refs.nameInput.def(""),this.funnel.user="",this.funnel.named=this.$refs.nameInput.value(),this.funnel.date_lt=this.view.getToday(),this.funnel.date_gte=this.$store.state.chronus.start,this.submit(),this.loading=!1}}},L=Q,B=(0,g.Z)(L,S,$,!1,null,"83d0f7fa",null),H=B.exports,D=e(4359),O=e(1204),M=e(6481),W=e(934),A=function(){var t=this,s=t._self._c;return s("div")},K=[],V={name:"",data(){return{}},methods:{async _count(t,s){if(s=await this.conn.get(this.api.build(this.conf.ENDPOINT[t]+"/count"),this.$store.state.token,s),s)return s},async count(t,s=null){return"stock"==t&&(t="browse_log_stock"),this._count(t,s)}}},U=V,j=(0,g.Z)(U,A,K,!1,null,"5f5a7c46",null),X=j.exports,z=e(8384),G=function(){var t=this,s=t._self._c;return s("div",{staticClass:"qiong-txt-12"},[s("div",{staticClass:"d-ib mr-3"},[s("button",{staticClass:"btn-sec-thin btn-in-plus bg-none py-1",on:{click:function(s){return t.$emit("plus_Father")}}},[s("v-icon",{staticClass:"qiong-txt-14"},[t._v("mdi-plus")]),t._v(" 新增記錄 ")],1)]),t._l(t.filter,(function(e,i){return s("button",{key:i,staticClass:"btn-filter",class:{"btn-filter_active":t.option==e.v},on:{click:function(s){return t.switching(e.v)}}},[t._v(" "+t._s(e.txt)+" ")])}))],2)},J=[],Y={name:"",data(){return{option:0,filter:[]}},methods:{switching(t){this.option=t,this.$emit("sign_Father",t)}}},tt=Y,st=(0,g.Z)(tt,G,J,!1,null,"5cc1a722",null),et=st.exports,it=function(){var t=this,s=t._self._c;return s("div",{staticClass:"input-in-table-wrapper py-3 pt-5 px-7 time"},[s("div",{staticClass:"qiong-td qiong-txt-td fx-l"},[s("div",{staticClass:"qiong-wide-5 tb-in-img"},[t.pro?s("img",{staticClass:"img",attrs:{src:t.pro.product_image}}):t._e()]),s("div",{staticClass:"qiong-wide-30 pl-2"},[s("pro-search-with-choise",{attrs:{vid:t.form_vid.pro},on:{choise:s=>t.pro=s}})],1),s("div",{staticClass:"qiong-wide-9 pr-0 txt-sus"},[t._v(" (無法編輯) ")]),s("div",{staticClass:"qiong-wide-8"},[s("pro-invent-select",{ref:"stockREF"})],1),s("div",{staticClass:"qiong-wide-7 pr-0"},[t.pro?s("nav",[-1==t.invens?s("qiong-loading",{attrs:{bigger:-1}}):s("span",[t._v(t._s(t.invens)+" (件)")])],1):s("span",[t._v("(自動檢索)")])]),s("div",{staticClass:"qiong-wide-8 pl-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.num,expression:"num"}],class:{"input-error":!t.form_vid.num},attrs:{type:"text",placeholder:"請輸入"},domProps:{value:t.num},on:{input:function(s){s.target.composing||(t.num=s.target.value)}}})]),s("div",{staticClass:"qiong-wide-10"},[s("pro-invent-opera-select",{ref:"operaREF"})],1),s("div",{staticClass:"qiong-wide-22"},[s("div",{staticClass:"qiong-td fx-l"},[s("div",{staticClass:"qiong-wide-50 d-ib"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],attrs:{type:"text",placeholder:"請輸入備註"},domProps:{value:t.remark},on:{input:function(s){s.target.composing||(t.remark=s.target.value)}}})]),s("div",{staticClass:"qiong-wide-50 t-r pr-0"},[0==t.success?s("nav",[s("button",{staticClass:"submit btn-save fw-b",on:{click:function(s){return t.save()}}},[t._v(" 儲存 ")]),s("button",{staticClass:"btn-cancel ml-3 txt-sub",on:{click:function(s){return t.$emit("cancel_Father")}}},[t._v(" 關閉 ")])]):t._e(),1==t.success?s("nav",{staticClass:"an_lefter hand",on:{click:function(s){return t.$emit("cancel_Father")}}},[s("p",{staticClass:"txt-succ"},[t._v("新增成功！")])]):t._e()])])])]),s("net-stock",{ref:"netStockREF"}),s("net-products",{ref:"productREF"})],1)},nt=[],at=function(){var t=this,s=t._self._c;return s("select",{directives:[{name:"model",rawName:"v-model",value:t.now,expression:"now"}],on:{change:[function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.now=s.target.multiple?e:e[0]},function(s){return t.$emit("change_Father",t.now)}]}},t._l(t.invens,(function(e,i){return s("option",{key:i,domProps:{value:e}},[t._v(" "+t._s(e.txt)+" ")])})),0)},ot=[],rt={name:"",data(){return{now:null,invens:[{txt:"加貨(增加)",v:"加貨",typed:0,add:!0},{txt:"減貨(減去)",v:"減貨",typed:1,add:!1},{txt:"樣品消耗(減去)",v:"樣品消耗",typed:3,add:!1},{txt:"壞貨(減去)",v:"壞貨",typed:4,add:!1}]}},mounted(){this.now=this.invens[0]}},lt=rt,ct=(0,g.Z)(lt,at,ot,!1,null,"6616c569",null),ut=ct.exports,dt=function(){var t=this,s=t._self._c;return s("select",{directives:[{name:"model",rawName:"v-model",value:t.now,expression:"now"}],on:{change:[function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.now=s.target.multiple?e:e[0]},t.fanhui]}},t._l(t.invens,(function(e,i){return s("option",{key:i,domProps:{value:e}},[t._v(" "+t._s(e.txt)+" ")])})),0)},pt=[],vt={name:"",data(){return{now:null,invens:[{txt:"尖沙咀倉庫",v:"尖沙咀",typed:0,sort_code:"TST_centre"},{txt:"火炭倉庫",v:"火炭",typed:1,sort_code:"FT_warehouse"}]}},mounted(){this.now=this.invens[0]},methods:{fanhui(){this.$emit("change_Father",this.now)}}},_t=vt,gt=(0,g.Z)(_t,dt,pt,!1,null,"31b86a84",null),mt=gt.exports,ht=function(){var t=this,s=t._self._c;return s("div",{staticClass:"ps-r w-100"},[s("div",{staticClass:"pro-choise-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.q,expression:"q"}],staticClass:"w-100",class:{"input-error":!t.vid},attrs:{type:"text",placeholder:"請輸入SKU或產品名稱進行搜索"},domProps:{value:t.q},on:{focus:t.openChoise,blur:t.close,change:t.openChoise,keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.openChoise.apply(null,arguments)},input:function(s){s.target.composing||(t.q=s.target.value)}}})]),t.show?s("nav",{staticClass:"w-100 pro-choise"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.msg,expression:"!msg"}],staticClass:"ani_upper"},t._l(t.pros,(function(e,i){return s("div",{key:i,staticClass:"pro-choise-item qiong-td fx-l"},[s("div",{staticClass:"qiong-wide-20"},[s("img",{attrs:{src:e.product_image}})]),s("div",{staticClass:"qiong-wide-60"},[e.translation&&e.translation[1]?s("span",[t._v(" "+t._s(e.translation[1].product_name)+" ")]):s("span",[t._v(" 產品 sku: "+t._s(e.sku)+" ")])]),s("div",{staticClass:"qiong-wide-20 t-r"},[s("button",{staticClass:"btn-sec-txt px-1",on:{click:function(s){return t.choise(e)}}},[t._v("選擇")])])])})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:t.msg,expression:"msg"}],staticClass:"py-6 fx-c ani_upper"},[t._v(" "+t._s(t.msg)+" ")])]):t._e(),s("fun-pros",{ref:"prosREF"})],1)},ft=[],wt=function(){var t=this,s=t._self._c;return s("div")},Ct=[],xt={computed:{src(){let t=this.$store.state.products;if(t)return t.map((t=>(t.named="",t.translation&&t.translation.map((s=>{t.named+=s.product_name})),t)))}},methods:{inn(t,s){return s.filter((s=>s.indexOf(t)>=0)).length>0},search(t){return this.src.filter((s=>this.inn(t,[s.sku,s.named])))}}},qt=xt,bt=(0,g.Z)(qt,wt,Ct,!1,null,null,null),yt=bt.exports,kt={components:{FunPros:yt},props:["vid"],data(){return{q:"",show:!1,msg:"",pro:{name:"孝姜 複合精華"},pros:[]}},watch:{q(t,s){t!=s&&this.fetchPro(t)}},methods:{fetchPro(t){let s=this.$refs.prosREF.search(t);s&&s.length<12?(this.msg="",this.pros=s,this.show=s.length>0):this.msg="請輸入更多的關鍵詞。"},openChoise(){this.q.length>1&&(this.show=this.pros.length>0)},close(){setTimeout((t=>this.show=!1),400)},choise(t){this.pro=t,this.q="["+t.sku+"] "+t.translation[0].product_name,this.show=!1,this.$emit("choise",t)}}},Zt=kt,Ft=(0,g.Z)(Zt,ht,ft,!1,null,"0e55ff50",null),Et=Ft.exports,Rt=e(6838),Nt=function(){var t=this,s=t._self._c;return s("div")},Pt=[],St={methods:{async one(t){let s=await this.conn.ex_get(this,"products",{id:t});if(s)return s?s[0]:null}}},$t=St,Tt=(0,g.Z)($t,Nt,Pt,!1,null,null,null),It=Tt.exports,Qt=function(){var t=this,s=t._self._c;return s("div")},Lt=[],Bt={methods:{async plus(t){let s=await this.conn.ex_post("stock_wp_update",t);s&&console.log("新增 RES =",s)}}},Ht=Bt,Dt=(0,g.Z)(Ht,Qt,Lt,!1,null,null,null),Ot=Dt.exports,Mt={components:{QiongImage:Rt.Z,ProInventSelect:mt,ProInventOperaSelect:ut,ProSearchWithChoise:Et,NetProducts:It,NetStock:Ot,QiongLoading:M.Z},name:"",data(){return{pro:null,opera:null,invens:0,stock:null,num:"",remark:"",form_vid:{pro:!0,num:!0},success:0}},watch:{num(t,s){let e=Number.parseInt(t);this.valid(),this.num=e&&e>0?e:0},async pro(t,s){if(this.invens=0,t&&t.id){this.invens=-1;let s=await this.$refs.productREF.one(t.id);s&&(this.invens=0,s.stock&&s.stock.map((t=>{this.invens+=Number.parseInt(t.in_stock)})),this.valid())}}},methods:{collct(){return this.stock=this.$refs.stockREF.now,this.opera=this.$refs.operaREF.now,this.stock.quantity=this.opera.add?this.num:0-this.num,this.valid()?{product_sku:this.pro.sku,stock:[this.stock]}:null},valid(){return this.form_vid.pro=!(!this.pro||!this.pro.sku),this.form_vid.num=!!(this.num&&this.num>0),this.form_vid.pro&&this.form_vid.num},async save(){let t=this.collct();if(t){this.success=0;const s=await this.$refs.netStockREF.plus(t);s&&(this.success=1,setTimeout((t=>this.$emit("refresh")),400))}}}},Wt=Mt,At=(0,g.Z)(Wt,it,nt,!1,null,"c031fb80",null),Kt=At.exports,Vt=e(3943),Ut=function(){var t=this,s=t._self._c;return t.records&&t.records.length>0?s("div",t._l(t.records,(function(t,e){return s("v-expansion-panels",{key:e,staticClass:"qiong-td qiong-br-0 w-full qiong-ex-panels py-0",attrs:{flat:"",accordion:""}},[s("v-expansion-panel",{staticClass:"qiong-br-0"},[s("v-expansion-panel-header",{staticClass:"qiong-txt-td qiong-td-exp"},[s("stock-r-ex-header",{staticClass:"px-7 pt-2",attrs:{v:t}})],1),s("v-expansion-panel-content",{staticClass:"qiong-txt-td"})],1)],1)})),1):s("qiong-empty")},jt=[],Xt=function(){var t=this,s=t._self._c;return s("div",{staticClass:"qiong-td td-center"},[s("div",{staticClass:"qiong-wide-5 tb-in-img"},[t.v.product?s("img",{staticClass:"img",attrs:{src:t.v.product.product_image}}):t._e()]),s("div",{staticClass:"qiong-wide-13 pl-2"},[t._v(" "+t._s(t.v.product.sku)+" ")]),s("div",{staticClass:"qiong-wide-17 pl-2"},[t.v.product?s("product-name-viewing",{attrs:{product:t.v.product}}):t._e()],1),s("div",{staticClass:"qiong-wide-9"},[t.v.order?s("span",[t._v(t._s(t.v.order))]):s("span",{staticClass:"txt-sus"},[t._v("(非訂單操作)")])]),s("div",{staticClass:"qiong-wide-8"},[t.v.stock_location?s("company-named-viewing",{staticClass:"qiong-txt-10",attrs:{named:t.v.stock_location}}):t._e()],1),s("div",{staticClass:"qiong-wide-7"},[t._v(" "+t._s(t.v.original_quantity)+"  "),t.v.original_quantity<=0?s("span",{class:{num_less:t.v.original_quantity<=0}},[t._v("（缺貨）")]):t._e()]),s("div",{staticClass:"qiong-wide-8 pl-2"},[t._v(" "+t._s(t.v.difference)+" ")]),s("div",{staticClass:"qiong-wide-10"}),s("div",{staticClass:"qiong-wide-12"},[t._v(" "+t._s(t.view.ser_timed(t.v.date,!1,!1))+" ")]),s("div",{staticClass:"qiong-wide-10"})])},zt=[],Gt={name:"",components:{CompanyNamedViewing:d.Z,ProductNameViewing:p.Z},props:["v"]},Jt=Gt,Yt=(0,g.Z)(Jt,Xt,zt,!1,null,"4362f244",null),ts=Yt.exports,ss={components:{StockRExHeader:ts,QiongEmpty:u.Z},name:"",props:["records"],data(){return{}}},es=ss,is=(0,g.Z)(es,Ut,jt,!1,null,"b6a945fe",null),ns=is.exports,as={name:"",components:{QiongPanelElement:o.Z,StockRecordsBody:h,QiongSpace:W.Z,StockRecordsLogoHeader:P,WidgetLogoStock:a.Z,QiongLoading:M.Z,QiongSubResult:O.Z,StockTopBar:H,TablePagerFooter:r.Z,QiongHeaderFilter:D.Z,StockRecordPager:b,WidgetCount:X,Pagenation:z.Z,StockTopFilter:et,ProStockPlus:Kt,PdfIndex:Vt.Z,StockRecordsExpanel:ns},data(){return{total:0,plus:!1,limit:60,count:0,funnl:{sku:"",user:"",date_lt:"",date_gte:""},top:{star:"",end:""},logos:[],logos_origin:[],loading:!0}},mounted(){},computed:{pdf_data(){return{tops:this.top,items:this.logos_origin}},footer(){return[{txt:"庫存總計",content:this.total}]}},methods:{sortRecords(t){this.logos_origin=t(this.logos,this.logos_origin),this.$refs.pageREF.now=1,this.sliceData()},insert_Top(t){this.top={start:t.date_gte,end:t.date_lt}},async stockLoading(t=null){this.total=0,this.loading=!0,this.insert_Top(t),t=await this.$refs.stockREF.lunch(t),t&&(this.count=t.length,this.logos_origin=t.map((t=>(this.total+=t.original_quantity,t))),this.sliceData(),this.loading=!1)},sliceData(t=0,s=this.limit){this.logos=this.logos_origin.slice(t,s),console.log("库存记录 =",this.logos_origin)},plusFinish(){this.plus=!1,this.$refs.topBarREF.submit()}}},os=as,rs=(0,g.Z)(os,i,n,!1,null,"5261b984",null),ls=rs.exports}}]);
//# sourceMappingURL=2.f8c2fde7.js.map