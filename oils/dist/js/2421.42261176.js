"use strict";(self["webpackChunkoils"]=self["webpackChunkoils"]||[]).push([[2421],{6519:function(t,e,s){s.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"pager px-0 an_upper"},[e("li",{on:{click:function(e){return t._next(t.now-1)}}},[t._v("上一頁")]),e("li",{staticClass:"px-2 ml-1",on:{click:function(e){return t._next(1)}}},[e("v-icon",{staticClass:"qiong-txt-14"},[t._v("mdi-chevron-double-left")])],1),e("li",{staticClass:"pager_fly"},[e("input",{attrs:{type:"text",id:"inpREF"},domProps:{value:t.now},on:{change:function(e){return t.go()}}}),e("span",[t._v("/ "+t._s(t.pages))])]),e("li",{staticClass:"px-2 mr-1",on:{click:function(e){return t._next(t.pages)}}},[e("v-icon",{staticClass:"qiong-txt-14"},[t._v("mdi-chevron-double-right")])],1),e("li",{on:{click:function(e){return t._next(t.now+1)}}},[t._v("下一頁")])])},i=[],a={props:{_count:Number,_limit:Number},data(){return{now:1}},watch:{now(t,e){this.$emit("page_Father",(t-1)*this._limit,this._limit*t)}},computed:{pages(){let t=Math.ceil(this._count/this._limit);return t=t||1,t}},methods:{go(t=null){t=t||document.getElementById("inpREF").value,this._next(t)},_next(t){t=null!=t?t:1,t=isNaN(t)?1:t,t=t<=0?this.pages:t,t=t>this.pages?1:t,this.now=t,document.getElementById("inpREF").value=t}}},o=a,r=s(1001),l=(0,r.Z)(o,n,i,!1,null,null,null),c=l.exports},9374:function(t,e,s){s.d(e,{Z:function(){return u}});var n=function(){var t=this,e=t._self._c;return e("div",[e("v-row",{staticClass:"qiong-panel_element qpe-mh mobie-panel",class:t.extra_class},[e("v-col",{staticClass:"px-0 qpe_inner py-0",attrs:{cols:t.cols}},[t._t("default")],2),t.need_space?e("v-col",{staticClass:"inner-empty"},[e("qiong-space",{attrs:{space:"7vh"}},[t._v(" ")])],1):t._e()],1)],1)},i=[],a=s(6306),o=s(6648),r={name:"",props:{need_space:{type:Boolean,default:!0},cols:{type:Number,default:12},extra_class:{type:String}},components:{QiongSpace:a.Z,QiongPageLing:o.Z},data(){return{}}},l=r,c=s(1001),d=(0,c.Z)(l,n,i,!1,null,"94a8aac0",null),u=d.exports},3944:function(t,e,s){s.d(e,{Z:function(){return u}});var n=function(){var t=this,e=t._self._c;return e("div",[t.need_top?e("pti-go-top"):t._e(),e("qiong-space",{attrs:{space:t.height}})],1)},i=[],a=s(3480),o=s(6306),r={components:{QiongSpace:o.Z,PtiGoTop:a.Z},name:"",props:{need_top:{type:Boolean,default:!0},height:{type:String,default:"210px"}},data(){return{}}},l=r,c=s(1001),d=(0,c.Z)(l,n,i,!1,null,"02d07b41",null),u=d.exports},7504:function(t,e,s){s.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t._self._c;return 1==t.bigger?e("v-row",{staticClass:"pager-header"},[e("v-col",{staticClass:"pl-7",class:t.extra_calss,attrs:{cols:12,sm:4}},[t._t("header")],2),e("v-col",{staticClass:"px-7 fx-r0",class:t.extra_calss,attrs:{cols:12,sm:8}},[t._t("filter")],2)],1):e("v-row",{staticClass:"pager-header"},[e("v-col",{staticClass:"pl-7",class:t.extra_calss,attrs:{cols:12,sm:6}},[t._t("header")],2),e("v-col",{staticClass:"px-7 fx-r0",class:t.extra_calss,attrs:{cols:12,sm:6}},[t._t("filter")],2)],1)},i=[],a={components:{},name:"",props:{bigger:{type:Number,default:1},extra_calss:{type:String}},data(){return{}}},o=a,r=s(1001),l=(0,r.Z)(o,n,i,!1,null,"34ab2fbb",null),c=l.exports},6648:function(t,e,s){s.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("v-col",{staticClass:"py-0 ma-0 pa-0",attrs:{cols:"12"}},[e("div",{staticClass:"qiong-line",class:t.ex_class})])},i=[],a={name:"",props:{ex_class:{type:String}},data(){return{}}},o=a,r=s(1001),l=(0,r.Z)(o,n,i,!1,null,"8711cf2c",null),c=l.exports},3480:function(t,e,s){s.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pti-go-top hand",class:{"turn-bown":t.is_down,"turn-up":!t.is_down},on:{click:t.toDis}},[e("v-icon",[t._v(" mdi-arrow-up ")])],1)},i=[],a={name:"",data(){return{is_down:!0,screenH:0,show:!1}},mounted(){this.screenH=window.screen.height,window.addEventListener("scroll",this.handleScroll,!0)},methods:{handleScroll(){let t=document.documentElement.scrollTop||document.body.scrollTop;t>this.screenH-300?this.is_down=!1:this.is_down=!0,this.show=document.body.offsetHeight>this.screenH},toDis(){this.is_down?this.toDown():this.toTop(),this.is_down=!this.is_down},toTop(){let t=document.documentElement.scrollTop||document.body.scrollTop;const e=setInterval((()=>{document.body.scrollTop=document.documentElement.scrollTop=t-=50,t<=0&&(clearInterval(e),this.$emit("finish_Father"))}),10)},toDown(){window.scrollTo(0,document.body.scrollHeight)}}},o=a,r=s(1001),l=(0,r.Z)(o,n,i,!1,null,"0ad07901",null),c=l.exports},2898:function(t,e,s){s.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t._self._c;return-1==t.bigger?e("div",{staticClass:"loading-small"}):1==t.bigger?e("div",{staticClass:"loading-huge"}):e("div",{staticClass:"loading"})},i=[],a={name:"LoadingSmall",props:{bigger:{type:Number,default:1}}},o=a,r=s(1001),l=(0,r.Z)(o,n,i,!1,null,"30dfa814",null),c=l.exports},8281:function(t,e,s){s.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("div")},i=[],a={methods:{async audit(t){},async fetching(){let t=await this.conn.ex_get(this,"transfer_audit_record",{_limit:300});if(console.log("转账审核 res =",t),t)return t},async edit(t){let e=await this.conn.ex_patch(this,"transfer_audit_edit",t,"");if(e)return!0}}},o=a,r=s(1001),l=(0,r.Z)(o,n,i,!1,null,null,null),c=l.exports},2421:function(t,e,s){s.r(e),s.d(e,{default:function(){return K}});var n=function(){var t=this,e=t._self._c;return e("v-container",{staticClass:"qiong-txt-td",attrs:{fluid:""}},[e("div",[e("tma-top-search-bar")],1),e("qiong-header-filter",[e("span",{attrs:{slot:"header"},slot:"header"},[t._v("轉賬審核")]),e("tma-top-filter",{attrs:{slot:"filter",_many:t.many,_many_origin:t.many_origin},on:{sign_Father:t.filter},slot:"filter"})],1),e("qiong-panel-element",{staticClass:"mobie-table",attrs:{need_space:!1}},[e("tma-tr"),t.loading?e("qiong-loading"):e("div",[t.many&&t.many.length>0?e("div",t._l(t.many,(function(s,n){return e("nav",{key:n,staticClass:"px-7"},[e("tma-body",{attrs:{v:s}},[e("extra-trans-status-opera",{attrs:{_id:n,one:s},on:{update:t.updStatus}})],1)],1)})),0):e("qiong-empty")],1),e("qiong-space",{attrs:{space:"24px"}})],1),e("div",{staticClass:"fx-c qiong-pt-20 mt-3"},[e("pagenation")],1),e("table-pager-footer"),e("net-transfer-audit",{ref:"auditREF"})],1)},i=[],a=s(6519),o=s(9374),r=s(3944),l=s(7504),c=s(2898),d=s(7116),u=s(6306),_=s(8281),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"qiong-txt-10 ps-r"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"audit-select",class:"audit-s-"+t.res},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.res,expression:"res"}],staticClass:"txt-fff",attrs:{id:"audit_"+t._id},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.res=e.target.multiple?s:s[0]},t.update]}},[e("option",{attrs:{value:"0"}},[t._v("審核中")]),e("option",{attrs:{value:"1"}},[t._v("審核通過")])]),0==t.res?e("v-icon",{staticClass:"qiong-txt-12 txt-fff op-70",on:{click:t.open}},[t._v("mdi-pencil-outline")]):t._e(),1==t.res?e("v-icon",{staticClass:"qiong-txt-12 txt-fff op-70",on:{click:t.open}},[t._v("mdi-chevron-down")]):t._e()],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]},[e("v-icon",{staticClass:"qiong-txt-20 circle-around"},[t._v("mdi-loading")])],1)])},m=[],v={name:"",props:["one","_id"],data(){return{res:0,loading:!1}},mounted(){},methods:{condition(){return{id:this.one.id,is_approved:0!=this.res}},update(){this.loading=!0,this.$emit("update",this.condition()),setTimeout((()=>{this.loading=!1}),1200)},open(){let t=document.getElementById("audit_"+this._id);t.click(),console.log(t)}}},f=v,h=s(1001),g=(0,h.Z)(f,p,m,!1,null,"f0bdbf30",null),x=g.exports,w=function(){var t=this,e=t._self._c;return e("div",{staticClass:"qiong-td qiong-txt-td py-2 lh-def fx-l"},[e("div",{staticClass:"qiong-wide-8 fw-b"},[t._v(" "+t._s(t.v.start_member_code)+" ")]),e("div",{staticClass:"qiong-wide-17"},[t._v(" "+t._s(t.v.start_display_name)+" ")]),e("div",{staticClass:"qiong-wide-8"},[t._v(" "+t._s(t.v.lp)+" LP ")]),e("div",{staticClass:"qiong-wide-8"},[t._v(" "+t._s(t.v.end_member_code)+" ")]),e("div",{staticClass:"qiong-wide-17"},[t._v(" "+t._s(t.v.end_display_name)+" ")]),e("div",{staticClass:"qiong-wide-15 pr-0"},[t._v(" "+t._s(t.view.ser_timed(t.v.date_transfer,!1,!1))+" ")]),e("div",{staticClass:"qiong-wide-13 t-c pr-0"},[t._t("default")],2),e("div",{staticClass:"qiong-wide-14 pl-2"},[t._v(" "+t._s(t.v.mark)+" ")])])},b=[],y={components:{ExtraTransStatusOpera:x,NetTransferAudit:_.Z},props:["v"],data(){return{items:[{start_member_code:"203001",start_display_name:"Ecmarketing",lp:23,end_member_code:"203002",end_display_name:"Eric",id:1,date_transfer:"2021-12-12 12:23",status:0,mark:"朋友贈送"},{start_member_code:"203001",start_display_name:"Ecmarketing",lp:23,end_member_code:"203002",end_display_name:"Eric",id:2,date_transfer:"2021-12-12 12:23",status:0,mark:"朋友贈送"}]}},methods:{}},C=y,q=(0,h.Z)(C,w,b,!1,null,"704d3fb6",null),Z=q.exports,k=function(){var t=this,e=t._self._c;return e("div",{staticClass:"qiong-txt-12"},t._l(t.tabs,(function(s,n){return e("button",{key:n,staticClass:"btn-filter-pure",class:{"btn-filter-pure-active":t.now==s.v,"txt-txt_x3_red":t.now!=s.v},on:{click:function(e){t.now=s.v}}},[t._v(" "+t._s(s.txt)+" ")])})),0)},T=[],E={name:"",props:["_many","_many_origin"],data(){return{now:0,tabs:[{txt:"全部",v:0},{txt:"審核中",v:1},{txt:"審核通過",v:2}]}},watch:{now(t,e){let s=this.switching(t);s=null==s?this._many_origin:this._many.filter((t=>t.status==s)),this.$emit("sign_Father",s)}},methods:{switching(t){let e=0;return 0==t?null:(1==t?e=0:2==t&&(e=1),e)}}},F=E,S=(0,h.Z)(F,k,T,!1,null,"74027527",null),N=S.exports,P=function(){var t=this,e=t._self._c;return e("v-row",{staticClass:"bar-filter px-7 mt-0 mb-1"},[e("div",{staticClass:"mobie-show pt-3"}),e("div",{staticClass:"v_col qiong-pt-15"},[e("div",{staticClass:"d-ib"},[e("label",[t._v("轉賬日期")]),e("div",{staticClass:"input-time"},[t.loading?e("input",{attrs:{type:"text",placeholder:"起始時間"}}):e("date-select",{attrs:{date:t.funnel.date_gte},on:{timed_Father:e=>t.funnel.date_gte=e}})],1),e("span",{staticClass:"bf_sub"},[t._v("至")]),e("div",{staticClass:"input-time"},[t.loading?e("input",{attrs:{type:"text",placeholder:"結束時間"}}):e("date-select",{attrs:{date:t.funnel.date_lt},on:{timed_Father:e=>t.funnel.date_lt=e}})],1)]),e("div",{staticClass:"d-ib"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.funnel.user,expression:"funnel.user"}],attrs:{type:"text",placeholder:"發款人編號或名稱"},domProps:{value:t.funnel.user},on:{input:function(e){e.target.composing||t.$set(t.funnel,"user",e.target.value)}}})]),e("div",{staticClass:"mobie-show pt-4"}),e("button",{staticClass:"submit",on:{click:t.submit}},[e("v-icon",[t._v("mdi-filter-outline")]),t._v(" 篩選 ")],1),e("button",{staticClass:"txt-acc_sub",on:{click:t.reset}},[e("v-icon",[t._v("mdi-reload")]),t._v(" 重置 ")],1)])])},$=[],Q=s(3186),B={components:{DateSelect:Q.Z},name:"",props:{_funnl:Object},data(){return{funnel:{user:"",date_gte:"",date_lt:""},loading:!0}},mounted(){this.reset()},methods:{locaProduct(t){const e=this.$store.state.products;let s="";if(t)for(let n=0;n<e.length;n++){const i=e[n];i.translation.map((e=>{e.product_name.indexOf(t)>=0&&(s=i.sku)}))}return s},submit(){let t={};for(let e in this.funnel)this.funnel[e]&&("named"==e?t["produc.sku"]=this.locaProduct(this.funnel[e]):t[e]=this.funnel[e]);this.$emit("submit_Father",t)},reset(){this.funnel.user="",this.funnel.named="",this.funnel.date_lt=this.view.getToday(),this.funnel.date_gte=this.$store.state.chronus.start,this.submit(),this.loading=!1}}},H=B,R=(0,h.Z)(H,P,$,!1,null,"0ae8fca3",null),D=R.exports,I=function(){var t=this;t._self._c;return t._m(0)},L=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"px-7 extra-tr"},[e("div",{staticClass:"qiong-tr qiong-txt-tr"},[e("div",{staticClass:"qiong-wide-8"},[t._v("發款人")]),e("div",{staticClass:"qiong-wide-17"},[t._v("發款人名稱")]),e("div",{staticClass:"qiong-wide-8"},[t._v("轉賬積分")]),e("div",{staticClass:"qiong-wide-8"},[t._v("收款人")]),e("div",{staticClass:"qiong-wide-17"},[t._v("收款人名稱")]),e("div",{staticClass:"qiong-wide-15"},[t._v("轉賬日期")]),e("div",{staticClass:"qiong-wide-13 t-c"},[t._v("狀態")]),e("div",{staticClass:"qiong-wide-14 pl-2"},[t._v("備註")])])])}],O={name:"",data(){return{}}},A=O,j=(0,h.Z)(A,I,L,!1,null,"386058ba",null),G=j.exports,M={name:"",components:{QiongHeaderFilter:l.Z,TmaTr:G,QiongPanelElement:o.Z,TmaTopFilter:N,TmaBody:Z,QiongSpace:u.Z,TmaTopSearchBar:D,Pagenation:a.Z,TablePagerFooter:r.Z,NetTransferAudit:_.Z,ExtraTransStatusOpera:x,QiongLoading:d.Z,QiongEmpty:c.Z},data(){return{loading:!0,many:[],many_origin:[{start_member_code:"203001",start_display_name:"Ecmarketing",lp:23,end_member_code:"203002",end_display_name:"Eric",id:1,date_transfer:"2021-12-12 12:23",status:0,mark:"朋友贈送"},{start_member_code:"203001",start_display_name:"Ecmarketing",lp:23,end_member_code:"203002",end_display_name:"Eric",id:2,date_transfer:"2021-12-12 12:23",status:0,mark:"朋友贈送"}]}},mounted(){this.fetching()},methods:{async fetching(){this.loading=!0;try{await this.$refs.auditREF.fetching()}catch(t){}this.many=this.many_origin,setTimeout((t=>this.loading=!1),400)},filter(t){this.loading=!0,this.many=t,setTimeout((t=>this.loading=!1),400)},one(t){let e=this.many_origin.filter((e=>e.id==t));return e?e[0]:null},async updStatus(t){try{let e=await this.$refs.auditREF.edit(t);e&&console.log("修改的数据 =",e)}catch(s){}const e=this.one(t.id);e.status=t.is_approved?1:0}}},z=M,J=(0,h.Z)(z,n,i,!1,null,"c7d0103e",null),K=J.exports}}]);
//# sourceMappingURL=2421.42261176.js.map