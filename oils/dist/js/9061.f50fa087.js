"use strict";(self["webpackChunkoils"]=self["webpackChunkoils"]||[]).push([[9061],{2792:function(t,s,e){e.d(s,{Z:function(){return h}});var n=function(){var t=this;t._self._c;return t._m(0)},i=[function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"qiong-gradient-line"})])}],o={name:"",data(){return{}}},r=o,a=e(1001),c=(0,a.Z)(r,n,i,!1,null,"64c2bf1c",null),h=c.exports},9061:function(t,s,e){e.r(s),e.d(s,{default:function(){return L}});var n=function(){var t=this,s=t._self._c;return s("v-container",{staticClass:"h-100 chronu-panel qiong-txt-14",attrs:{fluid:""}},[s("v-row",{staticClass:"mt-2"},[s("v-col",{attrs:{cols:"1"}}),s("v-col",{attrs:{cols:"12",sm:10}},[s("div",{staticClass:"qiong-txt-24 qiong-txt-primary-dark pb-3"},[t._v(" 結算月份 ")]),t.loading?t._e():s("chronu-title-part",{attrs:{months:t.ct},on:{nowmonth_Father:t.nowChronu,chronu_Father:t.changeSuccess}})],1),s("v-col",{attrs:{cols:"1"}})],1),t.loading?s("v-row",[s("v-col",{attrs:{col:"12"}},[s("br"),s("br"),s("br"),s("br"),s("qiong-loading",{attrs:{bigger:1}})],1)],1):s("v-row",[s("v-col",{attrs:{cols:"2"}}),s("v-col",{attrs:{cols:"12",sm:8}},[s("qiong-space",{staticClass:"qiong-pt-5 mobie-hide"}),s("div",{staticClass:"pb-2"},t._l(t.now_chronu,(function(e,n){return s("div",{key:n,staticClass:"my-5 chronu-item"},[s("chronu-item-part",{attrs:{c_item:e},on:{sign_Father:t.changeSuccess}}),n==e.length-1?s("v-divider"):t._e()],1)})),0)],1),s("v-col",{attrs:{col:"2"}})],1)],1)},i=[],o=e(7116),r=e(6306),a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"w-full chronu def-shadow pa-3"},[s("div",{staticClass:"chronu_name"},[s("v-icon",{attrs:{size:"14"}},[t._v("mdi-calendar-multiple")]),t._v(" "+t._s(t.chronu.display_name)+" "),s("button",{staticClass:"btn-sec float-right",on:{click:t.choiseIt}},[t._v("確認選擇")])],1),s("div",{staticClass:"chronu_start sub-header pl-4"},[t._v(" 開始："+t._s(t.view.ser_timed(t.chronu.start,!0))+" ")]),s("div",{staticClass:"chronu_end sub-header pl-4"},[t._v(" 結束："+t._s(t.view.ser_timed(t.chronu.end,!0))+" ")])])},c=[],h={props:{chronu:{type:Object}},name:"",data(){return{}},methods:{choiseIt(){this.$emit("sign_Father",this.chronu)}}},l=h,u=e(1001),d=(0,u.Z)(l,a,c,!1,null,"4a407b5c",null),_=d.exports,m=function(){var t=this,s=t._self._c;return s("div",{staticClass:"chronu py-3 pl-7 pr-3"},[s("div",{staticClass:"pb"},[s("span",{staticClass:"qiong-txt-16 txt-txt_x3 fw-b",class:{"txt-sec_son":t.now.id==t.c_item.chronu.id}},[s("v-icon",{attrs:{size:"14",color:"op-60"}},[t._v("mdi-calendar-multiple")]),t._v("  "+t._s(t.c_item.chronu.display_name)+" ")],1),t.now.id!=t.c_item.chronu.id?s("button",{staticClass:"fw-b py-2 px-5 float-right btn-sec-hov",on:{click:t.choiseIt}},[t._v("確認選擇")]):t._e()]),s("nav",{staticClass:"pl-6 pt-3 txt-sus"},[s("div",{staticClass:"chronu_start"},[t._v(" 開始： "+t._s(t.view.ser_timed(t.c_item.chronu.start,!0))+" ")]),s("div",{staticClass:"chronu_end pt-1"},[t._v(" 結束： "+t._s(t.view.ser_timed(t.c_item.chronu.end,!0))+" ")])])])},p=[],v={props:{c_item:{type:Object}},computed:{now(){return this.$store.state.chronus}},methods:{choiseIt(){this.$emit("sign_Father",this.c_item.chronu)}}},g=v,w=(0,u.Z)(g,m,p,!1,null,"28f3d5e6",null),b=w.exports,f=function(){var t=this,s=t._self._c;return s("div",[t._l(t.months,(function(e,n){return s("div",{key:n,staticClass:"qiong-pt-10 d-inline"},[s("button",{staticClass:"btn-chronu btn-chronu-year",class:{"btn-chronu-year_active":e.year==t.active_year},on:{click:function(s){return t.tapYear(e.year)}}},[t._v(" "+t._s(e.year)+" ")])])})),s("qiong-gradient-line",{staticClass:"qiong-pt-10"}),t.now_month.length>0?s("div",{staticClass:"qiong-pt-15"},t._l(t.now_month,(function(e,n){return s("button",{key:n,staticClass:"btn-chronu qiong-txt-12",class:{"btn-chronu-active":e.chronu_id==t.active_id},on:{click:function(s){return t.uploadChronu(e.chronu)}}},[t._v(" "+t._s(t.view.backend.view_month(e.month))+" ")])})),0):t._e()],2)},C=[],y=e(2792),$={components:{QiongGradientLine:y.Z},name:"",props:{months:{type:Array}},data(){return{year:"",now_month:[],def_m:[1,2,3,4,5,6,7,8,9,10,11,12],active_id:"",active_year:1998}},mounted(){new Date;this.active_id=this.$store.state.chronus.id,this.tapYear(this.$store.state.chronus.end.substring(0,4))},methods:{tapYear(t){this.months.map((s=>{const e=s.year;if(t==e){const t=s[e];this.now_month=t}})),this.active_year=t,this.uploadNowMonth()},uploadNowMonth(){this.$emit("nowmonth_Father",this.now_month)},uploadChronu(t){this.$emit("chronu_Father",t)}}},x=$,k=(0,u.Z)(x,f,C,!1,null,"f99d2a52",null),q=k.exports,I=e(381),S=e.n(I),N={components:{ChronusItem:_,QiongLoading:o.Z,ChronuTitlePart:q,ChronuItemPart:b,QiongSpace:r.Z},name:"",data(){return{chronus:[],loading:!0,ct:[],now_chronu:[]}},async mounted(){await this.simpleInit()},methods:{async simpleInit(){let t=window.sessionStorage.getItem("sandyy_chronus");t?(t=JSON.parse(t),t=await this.trashNew(t),t=t.map((t=>this.ser_chornu(t,!1))),this.ser_title(t),this.loading=!1):await this.chronusLoading()},async trashNew(t){let s=[];const e=S()(new Date);return t.map((t=>{let n=S()(t.start);return n<e&&s.push(t),t})),s.map((t=>(t.end_origin=t.end,t.end=t.end_date,t.start_origin=t.start,t.start=t.start_date,t)))},async chronusLoading(){let t=await this.conn.get(this.api.chronus,this.$store.state.token,{_sort:"start:DESC",_limit:999});t&&(t=await this.trashNew(t),t=t.map((t=>this.ser_chornu(t,!0))),this.chronus=t.sort(((t,s)=>this.view.sort_time(t,s))),window.sessionStorage.setItem("sandyy_chronus",JSON.stringify(t)),this.ser_title(t),this.loading=!1)},ser_chornu(t,s){try{delete t.created_at,delete t.updated_at,delete t.published_at,delete t.orders,delete t.bonuses,delete t.commissions,delete t.bonus_calculations}catch(t){}return this.ct.push(Number.parseInt(t.end.substring(0,4))),t},ser_title(t){this.ct=this.ct.filter(((t,s)=>this.ct.indexOf(t,0)===s)),this.ct=this.ct.map((s=>{let e={year:s};return e[s+""]=[],t.map((t=>{let n=t.end.substring(0,4),i=t.end.substring(5,8);s==n&&e[n].push({month:Number.parseInt(i),chronu_id:t.id,chronu:t})})),e}))},changeSuccess(t){this.$store.commit("saveLoading",!0),setTimeout((s=>{this.$store.commit("saveChronus",[t,!0]),this.$store.commit("saveSponsor",null),this.$store.commit("saveEnroller",null),this.$store.commit("saveCollection",null),this.$store.commit("saveTreeSponsor",null),this.$store.commit("saveTreeEnroller",null),this.$store.commit("saveBonusQualifyLine",null),this.$router.push("/home/user/center"),this.$store.commit("saveLoading",!1)}),300)},nowChronu(t){this.now_chronu=t}}},Z=N,F=(0,u.Z)(Z,n,i,!1,null,"47421d50",null),L=F.exports}}]);
//# sourceMappingURL=9061.f50fa087.js.map