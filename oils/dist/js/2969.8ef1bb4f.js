"use strict";(self["webpackChunkoils"]=self["webpackChunkoils"]||[]).push([[2969],{8384:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("ul",{staticClass:"pager px-0 an_upper"},[s("li",{on:{click:function(s){return t._next(t.now-1)}}},[t._v("上一頁")]),s("li",{staticClass:"px-2 ml-1",on:{click:function(s){return t._next(1)}}},[s("v-icon",{staticClass:"qiong-txt-14"},[t._v("mdi-chevron-double-left")])],1),s("li",{staticClass:"pager_fly"},[s("input",{attrs:{type:"text",id:"inpREF"},domProps:{value:t.now},on:{change:function(s){return t.go()}}}),s("span",[t._v("/ "+t._s(t.pages))])]),s("li",{staticClass:"px-2 mr-1",on:{click:function(s){return t._next(t.pages)}}},[s("v-icon",{staticClass:"qiong-txt-14"},[t._v("mdi-chevron-double-right")])],1),s("li",{on:{click:function(s){return t._next(t.now+1)}}},[t._v("下一頁")])])},n=[],r={props:{_count:Number,_limit:Number},data(){return{now:1}},watch:{now(t,s){this.$emit("page_Father",(t-1)*this._limit,this._limit*t)}},computed:{pages(){let t=Math.ceil(this._count/this._limit);return t=t||1,t}},methods:{go(t=null){t=t||document.getElementById("inpREF").value,this._next(t)},_next(t){t=null!=t?t:1,t=isNaN(t)?1:t,t=t<=0?this.pages:t,t=t>this.pages?1:t,this.now=t,document.getElementById("inpREF").value=t}}},a=r,o=e(1001),l=(0,o.Z)(a,i,n,!1,null,null,null),c=l.exports},1304:function(t,s,e){e.d(s,{Z:function(){return u}});var i=function(){var t=this,s=t._self._c;return s("div",[s("v-row",{staticClass:"qiong-panel_element qpe-mh mobie-panel",class:t.extra_class},[s("v-col",{staticClass:"px-0 qpe_inner py-0",attrs:{cols:t.cols}},[t._t("default")],2),t.need_space?s("v-col",{staticClass:"inner-empty"},[s("qiong-space",{attrs:{space:"7vh"}},[t._v(" ")])],1):t._e()],1)],1)},n=[],r=e(934),a=e(7667),o={name:"",props:{need_space:{type:Boolean,default:!0},cols:{type:Number,default:12},extra_class:{type:String}},components:{QiongSpace:r.Z,QiongPageLing:a.Z},data(){return{}}},l=o,c=e(1001),d=(0,c.Z)(l,i,n,!1,null,"94a8aac0",null),u=d.exports},4221:function(t,s,e){e.d(s,{Z:function(){return u}});var i=function(){var t=this,s=t._self._c;return s("div",[t.need_top?s("pti-go-top"):t._e(),s("qiong-space",{attrs:{space:t.height}})],1)},n=[],r=e(5725),a=e(934),o={components:{QiongSpace:a.Z,PtiGoTop:r.Z},name:"",props:{need_top:{type:Boolean,default:!0},height:{type:String,default:"210px"}},data(){return{}}},l=o,c=e(1001),d=(0,c.Z)(l,i,n,!1,null,"02d07b41",null),u=d.exports},4359:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return 1==t.bigger?s("v-row",{staticClass:"pager-header"},[s("v-col",{staticClass:"pl-7",class:t.extra_calss,attrs:{cols:12,sm:4}},[t._t("header")],2),s("v-col",{staticClass:"px-7 fx-r0",class:t.extra_calss,attrs:{cols:12,sm:8}},[t._t("filter")],2)],1):s("v-row",{staticClass:"pager-header"},[s("v-col",{staticClass:"pl-7",class:t.extra_calss,attrs:{cols:12,sm:6}},[t._t("header")],2),s("v-col",{staticClass:"px-7 fx-r0",class:t.extra_calss,attrs:{cols:12,sm:6}},[t._t("filter")],2)],1)},n=[],r={components:{},name:"",props:{bigger:{type:Number,default:1},extra_calss:{type:String}},data(){return{}}},a=r,o=e(1001),l=(0,o.Z)(a,i,n,!1,null,"34ab2fbb",null),c=l.exports},7667:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("v-col",{staticClass:"py-0 ma-0 pa-0",attrs:{cols:"12"}},[s("div",{staticClass:"qiong-line",class:t.ex_class})])},n=[],r={name:"",props:{ex_class:{type:String}},data(){return{}}},a=r,o=e(1001),l=(0,o.Z)(a,i,n,!1,null,"8711cf2c",null),c=l.exports},5725:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"pti-go-top hand",class:{"turn-bown":t.is_down,"turn-up":!t.is_down},on:{click:t.toDis}},[s("v-icon",[t._v(" mdi-arrow-up ")])],1)},n=[],r={name:"",data(){return{is_down:!0,screenH:0,show:!1}},mounted(){this.screenH=window.screen.height,window.addEventListener("scroll",this.handleScroll,!0)},methods:{handleScroll(){let t=document.documentElement.scrollTop||document.body.scrollTop;t>this.screenH-300?this.is_down=!1:this.is_down=!0,this.show=document.body.offsetHeight>this.screenH},toDis(){this.is_down?this.toDown():this.toTop(),this.is_down=!this.is_down},toTop(){let t=document.documentElement.scrollTop||document.body.scrollTop;const s=setInterval((()=>{document.body.scrollTop=document.documentElement.scrollTop=t-=50,t<=0&&(clearInterval(s),this.$emit("finish_Father"))}),10)},toDown(){window.scrollTo(0,document.body.scrollHeight)}}},a=r,o=e(1001),l=(0,o.Z)(a,i,n,!1,null,"0ad07901",null),c=l.exports},3233:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return-1==t.bigger?s("div",{staticClass:"loading-small"}):1==t.bigger?s("div",{staticClass:"loading-huge"}):s("div",{staticClass:"loading"})},n=[],r={name:"LoadingSmall",props:{bigger:{type:Number,default:1}}},a=r,o=e(1001),l=(0,o.Z)(a,i,n,!1,null,"30dfa814",null),c=l.exports},9441:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("div")},n=[],r={computed:{users(){return this.$store.state.user_collection}},methods:{_sort_users(t,s){let e=0,i=t.member_code,n=s.member_code;return i&&n&&(i=i?Number.parseInt(i):"",n=n?Number.parseInt(n):"",e=i-n),e},async user_of_iist(t={_limit:999}){this.conf.TEST;let s=await this.conn.ex_get(this,"pw_user_iist",t);return s=s?s.sort(((t,s)=>this._sort_users(t,s))):[],console.log("用户列表 =",s),s.filter((t=>!!t.member_code))},async user_detaii(t={}){let s=await this.conn.ex_get(this,"pw_user_detaii",t);return s||[]},async user_patch(t,s){let e=await this.conn.ex_patch(this,"pw_user_detaii",t,{member_code:s},"",!0);return e||[]},async change_pass(t,s){let e=await this.conn.ex_post(this,"change_pass",t,{member_code:s});return e||null}}},a=r,o=e(1001),l=(0,o.Z)(a,i,n,!1,null,null,null),c=l.exports},6283:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("div",{staticStyle:{"text-align":"center","font-size":"1.12em","line-height":"3em"}},[t._v(" Sales report for "),s("span",[t._v(t._s(t.view.ser_timed_en(this.$store.state.chronus.start,!0)))]),t._v("-"),s("span",[t._v(t._s(t.view.ser_timed_en(this.$store.state.chronus.end,!0)))])])},n=[],r={name:"",props:{start:String,end:String},data(){return{}}},a=r,o=e(1001),l=(0,o.Z)(a,i,n,!1,null,"89bd1d38",null),c=l.exports},7442:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("div")},n=[],r={name:"",data(){return{}},methods:{add_style(t){let s="\n                <style>\n                    table { width: 100%; border-width: 1px !important; border-collapse: collapse !important; border-color: #f9f9f9 !important; }\n                    .fl { float: left }\n                    .fs-c { text-align: center }\n\n            .root { width: 100%; background: rgb(255, 255, 255); color: #000000; }\n.td-buy td { padding: 4px 6px }\n\n.thead-buy {\n    color: #FFF;\n    background: #404040;\n    border: none !important; }\n\n.thead-buy td { \n    padding: 4px  6px;\n    line-height: 1.7em;\n    border: none !important; }\n                </style>\n                "+t;return s},async printed(){this.$emit("start");let t=document.getElementById("pdf_buy"),s=t.outerHTML;s=this.add_style(s),s=this.view.pdf.serial_Html(s),s=await this.view.pdf.html_content(s),s&&(console.log("PDF RES =",s),this.download(s))},download(t){let s=document.createElement("a");s.download="sandyy_tree_digram.pdf",s.href=t,s.target="_blank",s.click()}}},a=r,o=e(1001),l=(0,o.Z)(a,i,n,!1,null,"a256ac96",null),c=l.exports},2969:function(t,s,e){e.r(s),e.d(s,{default:function(){return Pt}});var i=function(){var t=this,s=t._self._c;return s("v-container",{staticClass:"qiong-txt-td",attrs:{fluid:""}},[s("qiong-header-filter",{staticClass:"bg-none"},[s("span",{attrs:{slot:"header"},slot:"header"},[t._v(" 用戶列表 ")]),s("div",{attrs:{slot:"filter"},slot:"filter"},[s("pw-user-search",{attrs:{many:t.users_origin},on:{ciear:()=>t.search(0),result:s=>t.search(s)}})],1)]),s("div",{staticClass:"pb-1"}),s("qiong-panel-element",{staticClass:"mobie-table",attrs:{need_space:!1}},[s("pw-user-tr",{attrs:{many:t.users_origin},on:{sign:t.refreshMany}}),t.loading?s("nav",[s("qiong-loading")],1):s("pw-user-td",{attrs:{many:t.users}})],1),s("div",{staticClass:"fx-c mt-5 pt-3"},[s("pagenation",{directives:[{name:"show",rawName:"v-show",value:t.users_origin,expression:"users_origin"}],attrs:{_limit:t.iimit,_count:t.users_origin.length},on:{page_Father:t.pager}})],1),s("table-pager-footer"),t.is_pdf?s("pdf-pw-user",{attrs:{users:t.users_origin}}):t._e(),s("net-pw-user",{ref:"pwuREF"})],1)},n=[],r=e(8384),a=e(1304),o=e(4221),l=e(4359),c=e(6481),d=e(934),u=e(9441),p=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"pti-go-pdf hand",on:{click:t.lockPrint}},[t.printing?s("v-icon",{staticClass:"circle-around"},[t._v("mdi-loading")]):s("v-icon",[t._v("mdi-file-outline")])],1),s("pdf-pw-user-inner",{staticClass:"pdf_modal",attrs:{items:t.users}}),s("pdf-buy-print",{ref:"pdfBuyREF"})],1)},_=[],h=e(7442),m=function(){var t=this,s=t._self._c;return s("div",{staticClass:"root",staticStyle:{"line-height":"1.7em"},attrs:{id:"pdf_buy"}},[s("pdf-buy-header",{attrs:{start:"29 Sept 2021",end:"28 Oct 2021"}}),s("table",{staticClass:"table-buy",staticStyle:{width:"100%"},attrs:{border:"1"}},[s("pdf-pw-user-table-header"),s("pdf-pw-user-table-content",{attrs:{_items:t.items}})],1)],1)},v=[],f=e(6283),g=function(){var t=this,s=t._self._c;return s("tbody",{staticClass:"tbody-buy"},t._l(t._items,(function(e,i){return s("tr",{key:i,staticClass:"td-buy"},[s("td",{attrs:{width:"10%"}},[t._v(t._s(e.member_code))]),s("td",{attrs:{width:"19%"}},[t._v(t._s(e.display_name))]),s("td",{attrs:{width:"21%"}},[t._v(" "+t._s(t.address(e))+" ")]),s("td",{attrs:{width:"9%"}},[t._v(t._s(e.phone))]),s("td",{staticStyle:{"padding-right":"6px"},attrs:{width:"12%"}},[t._v(t._s(e.email))]),s("td",{attrs:{width:"10%"}},[t._v(t._s(e.register_type))]),s("td",{attrs:{width:"9%"}},[null==e.isSaveToWallet?s("div",{staticClass:"txt-sub"}):s("div",[e.isSaveToWallet?s("span",[t._v("電子錢包")]):s("span",[t._v("支票")])])]),s("td",{attrs:{width:"10%"}},[t._v(" "+t._s(t.active(e.member_area))+" ")])])})),0)},w=[],y={props:{_items:Array},methods:{address(t){let s=t.address;return s?`${s.country},${s.area},${s.district},${s.address}`:""},active(t){return t?"Active":"Non-active"}}},b=y,x=e(1001),C=(0,x.Z)(b,g,w,!1,null,"20115367",null),Z=C.exports,P=function(){var t=this;t._self._c;return t._m(0)},S=[function(){var t=this,s=t._self._c;return s("thead",{staticClass:"thead-buy",staticStyle:{width:"100%"}},[s("tr",{staticStyle:{width:"100%"}},[s("td",{attrs:{width:"10%"}},[t._v("Member ID")]),s("td",{attrs:{width:"19%"}},[t._v("Member Name")]),s("td",{attrs:{width:"16%"}},[t._v("Address")]),s("td",{attrs:{width:"9%"}},[t._v("Phone")]),s("td",{attrs:{width:"17%"}},[t._v("Email")]),s("td",{attrs:{width:"10%"}},[t._v("Registration Type")]),s("td",{attrs:{width:"9%"}},[t._v("Payment Terms")]),s("td",{attrs:{width:"10%"}},[t._v("Membership authority")])])])}],T={},k=T,q=(0,x.Z)(k,P,S,!1,null,"6547fd80",null),E=q.exports,N={components:{PdfBuyHeader:f.Z,PdfPwUserTableContent:Z,PdfPwUserTableHeader:E},props:{items:Array}},$=N,F=(0,x.Z)($,m,v,!1,null,"1447e107",null),R=F.exports,I={components:{PdfPwUserInner:R,PdfBuyPrint:h.Z},props:["users"],data(){return{printing:!1,loading:!1}},methods:{lockPrint(){this.printing||(this.printing=!0,this.$refs.pdfBuyREF.printed(),setTimeout((()=>{this.printing=!1}),2400))}}},H=I,M=(0,x.Z)(H,p,_,!1,null,"57add17e",null),A=M.exports,B=function(){var t=this,s=t._self._c;return t.many&&t.many.length>0?s("nav",{staticClass:"pt-2"},t._l(t.many,(function(e,i){return s("div",{key:i,staticClass:"px-7 qiong-td pw-td"},[s("div",{staticClass:"w-10"},[t._v(" "+t._s(e.member_code)+" ")]),s("div",{staticClass:"w-24"},[t._v(" "+t._s(e.display_name)+" ")]),s("div",{staticClass:"w-10"},[t._v(t._s(e.phone))]),s("div",{staticClass:"w-20 pr-3"},[t._v(t._s(e.email))]),s("div",{staticClass:"w-10 pr-1"},[s("pwv-regis-type",{attrs:{code:e.register_type}})],1),s("div",{staticClass:"w-9"},[null==e.isSaveToWallet?s("div",{staticClass:"txt-sub"},[t._v(" 未設定 ")]):s("div",[e.isSaveToWallet?s("span",[t._v("電子錢包")]):s("span",[t._v("支票")])])]),s("div",{staticClass:"w-11 pl-1"},[s("pw-active-bulb",{staticClass:"fx-l",attrs:{active:!!e.member_area&&e.member_area}})],1),s("div",{staticClass:"w-4 fx-r"},[s("pw-table-opera",{staticClass:"fx-r",attrs:{item:e}})],1)])})),0):s("nav",[s("qiong-empty")],1)},Q=[],U=e(3233),D=function(){var t=this,s=t._self._c;return t.active?s("div",{},[s("v-icon",{staticClass:"pw-sec_son"},[t._v("mdi-lightbulb")]),s("span",{staticClass:"pl-1"},[t._v("Active")])],1):s("div",{},[s("v-icon",[t._v("mdi-lightbulb-outline")]),s("span",{staticClass:"pl-1"},[t._v("Non-Active")])],1)},W=[],L={props:["active"]},O=L,z=(0,x.Z)(O,D,W,!1,null,null,null),G=z.exports,J=function(){var t=this,s=t._self._c;return s("div",{staticClass:"pw-pri_son"},[s("v-icon",{on:{click:t.edit}},[t._v("mdi-square-edit-outline")])],1)},j=[],K=(e(7658),{props:["item"],methods:{edit(){sessionStorage.setItem("sandyy_pw_user",JSON.stringify(this.item)),this.$router.push("/home/pw_user/user_edit")}}}),V=K,X=(0,x.Z)(V,J,j,!1,null,null,null),Y=X.exports,tt=function(){var t=this,s=t._self._c;return s("div",{staticClass:"d-ib"},[t._v(" "+t._s(t.txt)+" ")])},st=[],et={props:["code"],data(){return{src:{personal:{v:0,txt:"會員 - 個人賬戶註冊",txt_so:"個人",txt_en:"Personal Registration",code:"personal"},corp:{v:1,txt:"會員 - 公司賬戶註冊",txt_so:"公司賬戶",txt_en:"Corp Registration",code:"corp"},p_customer:{v:2,txt:"自用顧客",txt_so:"自用顧客",txt_en:"Preferred Customer",code:"p_customer"},r_customer:{v:3,txt:"零售顧客",txt_so:"零售顧客",txt_en:"Retail Customer",code:"r_customer"}}}},computed:{txt(){let t=this.code;return t?(t=this.src[t],t.txt_so):""}}},it=et,nt=(0,x.Z)(it,tt,st,!1,null,null,null),rt=nt.exports,at={components:{PwActiveBulb:G,PwTableOpera:Y,QiongEmpty:U.Z,PwvRegisType:rt},props:["many"]},ot=at,lt=(0,x.Z)(ot,B,Q,!1,null,"099dc71c",null),ct=lt.exports,dt=function(){var t=this,s=t._self._c;return s("div",{staticClass:"pb-1"},[s("div",{staticClass:"pager-header-in-table qiong-tr qiong-txt-tr px-7"},[s("div",{staticClass:"w-10"},[t._v("Member ID")]),s("div",{staticClass:"w-24"},[t._v("Member Name")]),s("div",{staticClass:"w-10"},[t._v("Phone")]),s("div",{staticClass:"w-20"},[t._v("Email")]),s("div",{staticClass:"w-10 pr-1"},[t._v("Registration Type")]),s("div",{staticClass:"w-9"},[t._v("Save to Wallet   "),t.s_payway?s("v-icon",{staticClass:"qiong-txt-16",on:{click:t.sortPayway}},[t._v("mdi-sort-ascending")]):s("v-icon",{staticClass:"qiong-txt-16",on:{click:t.sortPayway}},[t._v("mdi-sort-reverse-variant")])],1),s("div",{staticClass:"w-11 pl-2"},[t._v("Membership authority   "),t.s_area?s("v-icon",{staticClass:"qiong-txt-16",on:{click:t.sortArea}},[t._v("mdi-sort-ascending")]):s("v-icon",{staticClass:"qiong-txt-16",on:{click:t.sortArea}},[t._v("mdi-sort-reverse-variant")])],1),s("div",{staticClass:"w-4"},[t._v(" ")])])])},ut=[],pt={props:["many"],data(){return{s_area:!1,s_payway:!1,origin:[]}},mounted(){},methods:{_funni(t){let s=[],e=[];return this.many.map((i=>{i[t]?s.push(i):e.push(i)})),e.concat(s)},sortArea(){this.s_area?this.$emit("sign",this.many.sort(this._sort)):this.$emit("sign",this._funni("member_area")),this.s_payway=!1,this.s_area=!this.s_area},sortPayway(){this.s_payway?this.$emit("sign",this.many.sort(this._sort)):this.$emit("sign",this._funni("isSaveToWallet")),this.s_area=!1,this.s_payway=!this.s_payway},_sort(t,s){let e=0,i=t.member_code,n=s.member_code;return i&&n&&(i=i?Number.parseInt(i):"",n=n?Number.parseInt(n):"",e=i-n),e}}},_t=pt,ht=(0,x.Z)(_t,dt,ut,!1,null,null,null),mt=ht.exports,vt=function(){var t=this,s=t._self._c;return s("div",[s("nav",{staticClass:"pw-ftr-search"},[s("span",[s("v-icon",[t._v("mdi-magnify")])],1),s("input",{directives:[{name:"model",rawName:"v-model",value:t.word,expression:"word"}],attrs:{placeholder:"輸入用戶名稱或編號"},domProps:{value:t.word},on:{input:function(s){s.target.composing||(t.word=s.target.value)}}}),s("span",{staticClass:"pw-ftr-ciose",class:{"pw-ftr-ciose-active":t.word.length>1},on:{click:function(s){t.word=""}}},[s("v-icon",[t._v("mdi-close")])],1)])])},ft=[],gt={props:["many"],watch:{word(t){this.many&&this.many.length>0&&(t?this.search(t):this.ciear())}},data(){return{word:""}},methods:{ciear(){this.$emit("ciear")},search(t){if(t.length>3){const s=this.many.filter((s=>{let e=!1;return(s.member_code+"").indexOf(t)>=0&&(e=!0),(s.display_name+"").indexOf(t)>=0&&(e=!0),e}));this.$emit("result",s)}}}},wt=gt,yt=(0,x.Z)(wt,vt,ft,!1,null,null,null),bt=yt.exports,xt={components:{QiongHeaderFilter:l.Z,QiongPanelElement:a.Z,QiongSpace:d.Z,QiongLoading:c.Z,Pagenation:r.Z,TablePagerFooter:o.Z,PwUserTr:mt,PwUserTd:ct,PdfPwUser:A,NetPwUser:u.Z,PwUserSearch:bt},data(){return{users:[],iimit:50,users_origin:[],loading:!0}},computed:{is_pdf(){let t=this.users_origin;return t&&t.length>0}},mounted(){this.init()},methods:{async _fetching(){return await this.$refs.pwuREF.user_of_iist()},async init(){this.refreshMany(await this._fetching())},search(t){this.users=0==t?this.users_origin:t},pager(t,s){this.users=this.users_origin.slice(t,s)},refreshMany(t){this.loading=!0,this.users_origin=t,this.pager(0,this.iimit),setTimeout((t=>this.loading=!1),300)}}},Ct=xt,Zt=(0,x.Z)(Ct,i,n,!1,null,"4ffd548e",null),Pt=Zt.exports}}]);
//# sourceMappingURL=2969.8ef1bb4f.js.map