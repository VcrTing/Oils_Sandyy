"use strict";(self["webpackChunkoils"]=self["webpackChunkoils"]||[]).push([[6372],{800:function(t,e,s){s.d(e,{Z:function(){return u}});var n=function(){var t=this,e=t._self._c;return e("div")},i=[],a={name:"",data(){return{}},methods:{async fecthingUser(t){let e=await this.conn.get(this.api.users,this.$store.state.token,{member_code:t});if(e)return e=e?e[0]:{},e}}},r=a,l=s(1001),o=(0,l.Z)(r,n,i,!1,null,"ed9069a8",null),u=o.exports},7416:function(t,e,s){s.d(e,{Z:function(){return u}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"alert alert-warning pa-3 px-7"},[e("span",[t._t("default")],2)])},i=[],a={name:"",data(){return{}}},r=a,l=s(1001),o=(0,l.Z)(r,n,i,!1,null,"8bc171c4",null),u=o.exports},6372:function(t,e,s){s.r(e),s.d(e,{default:function(){return x}});s(7658);var n=function(){var t=this,e=t._self._c;return e("mc-form-page-layout",{attrs:{header:"更改會員 LP 等級"},on:{back_Father:function(e){return t.$router.push("/home/member_operate/level_change")}}},[e("div",[e("f-mlc-form",{ref:"formREF"})],1),e("div",{staticClass:"btn-transfer an_upper qiong-pt-15 qiong-txt-14"},[e("button",{staticClass:"reset",on:{click:t.reset}},[e("v-icon",{staticClass:"qiong-txt-16"},[t._v("mdi-refresh")]),t._v(" 重置表單 ")],1),e("button",{staticClass:"btn-pri",on:{click:t.submit}},[e("v-icon",{staticClass:"qiong-txt-16 mr-3"},[t._v("mdi-check-underline")]),t._v(" 提交結果 ")],1)])])},i=[],a=s(5993),r=function(){var t=this,e=t._self._c;return e("form",{staticClass:"form-def"},[e("v-row",[e("v-col",{attrs:{cols:"12",sm:5}},[e("label",[t._v("用戶編號")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.funnel.member_code,expression:"funnel.member_code"}],attrs:{type:"text",placeholder:"請輸入用戶的編號"},domProps:{value:t.funnel.member_code},on:{change:t.fetchingUser,input:function(e){e.target.composing||t.$set(t.funnel,"member_code",e.target.value)}}})]),e("v-col",{attrs:{cols:"12",sm:7}},[e("label",[t._v("所屬用戶")]),e("div",{staticClass:"fx-l input input-fix fx-l"},[t.user_loading?e("v-icon",{staticClass:"qiong-txt-18 ani-rotate loading"},[t._v("mdi-loading")]):e("p",[t.user?e("span",[e("v-icon",{staticClass:"qiong-txt-16"},[t._v("mdi-account-circle-outline")]),e("span",[t._v(" "+t._s(t.user.display_name)+" ")])],1):e("span",[t._v(" 無 ")])])],1)])],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:4}},[e("label",{staticClass:"txt-pri"},[t._v("更改等級")]),e("nav",{staticClass:"input-with-icon"},[e("v-icon",{staticClass:"qiong-txt-15 i-fix"},[t._v("mdi-pen")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.funnel.num,expression:"funnel.num"}],staticClass:"fw-b pl-num",attrs:{type:"number",placeholder:"請輸入新的等級數字"},domProps:{value:t.funnel.num},on:{input:function(e){e.target.composing||t.$set(t.funnel,"num",e.target.value)}}}),e("span",[t._v(" 級 ")])],1)]),e("v-col",{attrs:{cols:"12",sm:8}},[e("label",[t._v("用戶原等級信息")]),e("div",{staticClass:"input input-fix"},[t.user?e("span",[e("span",{staticClass:"fw-b"},[t._v(" "+t._s(t.user.lp_wallet.rank)+" 級 ")]),e("span",{staticClass:"txt-sub"},[t._v(" ，擁有"+t._s(t.user.lp_wallet.consecutive_month)+"個月的忠誠度 ")])]):e("span",{staticClass:"sub"},[t._v("(自動檢索)")])])])],1),e("v-row",[e("v-col",{attrs:{col:"12"}},[e("label",[t._v("備註")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.funnel.mark,expression:"funnel.mark"}],staticClass:"input-bg",attrs:{type:"text",placeholder:"輸入您要備註的文字"},domProps:{value:t.funnel.mark},on:{change:t.validMark,input:function(e){e.target.composing||t.$set(t.funnel,"mark",e.target.value)}}})])],1),e("widget-user-by-member-code",{ref:"userREF"}),t.msg?e("div",{staticClass:"pt-3 qiong-txt-16 anime-later"},[e("qiong-space",{attrs:{space:"0.5vw"}}),e("dialog-alert",[t._v(t._s(t.msg))])],1):t._e()],1)},l=[],o=s(800),u=s(4711),c=s(7416),m=s(934),d={components:{DateSelect:u.Z,WidgetUserByMemberCode:o.Z,DialogAlert:c.Z,QiongSpace:m.Z},name:"",data(){return{user:null,user_loading:!1,msg:"",funnel:{mark:"",num:10,num_origin:2,member_code:""},loading:!0}},mounted(){this.reset()},methods:{geneTimed(t=24){let e=[];for(let s=0;s<t;s++)e.push(s);return e},reciveDate(t){const e=this.view.getToday();let s=this.view.judge_date(t,e);this.funnel.date=s?t:e,s||(this.loading=!0,setTimeout((t=>{this.loading=!1}),600))},validHour(){},validMark(){},validCode(){let t=this.funnel.member_code;return t=Number.parseInt(t),t=!!(t&&t>=203e3),t},validNum(){let t=this.funnel.num;return t=Number.parseInt(t),t=!(!t||0==t),t},async fetchingUser(){if(this.validCode()){this.user_loading=!0;let t=await this.$refs.userREF.fecthingUser(this.funnel.member_code);t&&this.setUser(t)}else this.setUser(null)},setUser(t){this.user_loading=!0,this.user=t,console.log("LP LEVEL 用户的数据 =",t),setTimeout((t=>this.user_loading=!1),400)},submit(){if(this.validCode())if(this.validNum()){if(this.user.member_code)return this.funnel.code=this.user.member_code,this.funnel;this.msg="未檢測到用戶的編號。"}else this.msg="檢測到 會員等級數字 為空，請檢查輸入。";else this.msg="檢測到 用戶編號 為空或輸入有誤，請檢查輸入。";setTimeout((t=>this.msg=""),4400)},reset(){this.loading=!0,this.setUser(null),this.funnel={mark:"",num:null,num_origin:0,member_code:""},setTimeout((t=>{this.loading=!1}),400)}}},h=d,p=s(1001),f=(0,p.Z)(h,r,l,!1,null,"04b49b63",null),v=f.exports,_={components:{McFormPageLayout:a.Z,FMlcForm:v},methods:{reset(){this.$refs.formREF.reset()},submit(){let t=this.$refs.formREF.submit();t&&this._submit(t.code,{rank:t.num,remark:t.mark})},async _submit(t,e){let s=await this.conn.ex_patch(this,"member_rank_edit",e,t);s&&setTimeout((t=>this.$router.push("/home/member_operate/level_change")),600)}}},g=_,b=(0,p.Z)(g,n,i,!1,null,"08f74ebc",null),x=b.exports},5993:function(t,e,s){s.d(e,{Z:function(){return u}});s(7658);var n=function(){var t=this,e=t._self._c;return e("v-container",{staticClass:"px-0",attrs:{fluid:""}},[e("div",{staticClass:"fx-l py-3 pl-5 txt-header"},[e("div",{staticClass:"d-ib hand",on:{click:function(e){return t.$emit("back_Father")}}},[e("v-icon",{staticClass:"qiong-txt-22"},[t._v("mdi-chevron-left")])],1),e("div",{staticClass:"pl-2 fw-b hand",on:{click:function(e){return t.$emit("back_Father")}}},[t._v(" "+t._s(t.header)+" ")])]),e("div",{staticClass:"panel-pure txt-def"},[t.no_switch?t._e():e("div",{staticClass:"fx-s"},[e("div"),e("div",{staticClass:"qiong-txt-10 changer"},t._l(t.tabs,(function(s,n){return e("button",{key:n,staticClass:"ml-5 hand",class:{"btn-pri-thin py-2 px-6 fw-b":t.now==s.path,"txt-pri":t.now!=s.path},on:{click:function(e){return t.$router.push(s.path)}}},[t._v(" "+t._s(s.txt)+" ")])})),0)]),e("div",{staticClass:"qiong-txt-12 upper"},[t._t("default")],2)]),e("div",{staticClass:"pti-go-top hand",on:{click:function(e){return t.$emit("back_Father")}}},[e("v-icon",[t._v("mdi-chevron-left")])],1),e("div",{staticClass:"mobie-for-form"})])},i=[],a={name:"",props:["header","no_switch"],data(){return{}},computed:{now(){let t=this.$route.path;return t=t?t.split("/"):null,t=t?t[t.length-1]:null,t},tabs(){return[{txt:"增加 LP 積分",path:"form_lp_plus"},{txt:"更改會員 LP 等級",path:"form_level_change"},{txt:"重啟會員 LP 資格",path:"form_reload_qualify"}]}}},r=a,l=s(1001),o=(0,l.Z)(r,n,i,!1,null,"7b50eaad",null),u=o.exports}}]);
//# sourceMappingURL=6372.472b2561.js.map