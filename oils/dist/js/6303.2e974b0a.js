"use strict";(self["webpackChunkoils"]=self["webpackChunkoils"]||[]).push([[6303],{7504:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return 1==t.bigger?s("v-row",{staticClass:"pager-header"},[s("v-col",{staticClass:"pl-7",class:t.extra_calss,attrs:{cols:12,sm:4}},[t._t("header")],2),s("v-col",{staticClass:"px-7 fx-r0",class:t.extra_calss,attrs:{cols:12,sm:8}},[t._t("filter")],2)],1):s("v-row",{staticClass:"pager-header"},[s("v-col",{staticClass:"pl-7",class:t.extra_calss,attrs:{cols:12,sm:6}},[t._t("header")],2),s("v-col",{staticClass:"px-7 fx-r0",class:t.extra_calss,attrs:{cols:12,sm:6}},[t._t("filter")],2)],1)},n=[],a={components:{},name:"",props:{bigger:{type:Number,default:1},extra_calss:{type:String}},data(){return{}}},r=a,l=e(1001),o=(0,l.Z)(r,i,n,!1,null,"34ab2fbb",null),c=o.exports},2898:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return-1==t.bigger?s("div",{staticClass:"loading-small"}):1==t.bigger?s("div",{staticClass:"loading-huge"}):s("div",{staticClass:"loading"})},n=[],a={name:"LoadingSmall",props:{bigger:{type:Number,default:1}}},r=a,l=e(1001),o=(0,l.Z)(r,i,n,!1,null,"30dfa814",null),c=o.exports},882:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("div",[t.is_add?s("v-icon",{staticClass:"icon-lp-plus"},[t._v(" mdi-plus ")]):s("v-icon",{staticClass:"icon-lp-minus"},[t._v(" mdi-minus ")]),t._v(" "+t._s(t.lp)+"  "),s("span",{staticClass:"txt-s us"},[t._v("LP")])],1)},n=[],a={name:"",props:{lp:Number,is_add:Boolean},data(){return{}}},r=a,l=e(1001),o=(0,l.Z)(r,i,n,!1,null,"f01180c2",null),c=o.exports},1742:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("div")},n=[],a={mounted(){this.$emit("sign_Father")}},r=a,l=e(1001),o=(0,l.Z)(r,i,n,!1,null,null,null),c=o.exports},7589:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("div")},n=[],a={mounted(){},methods:{build_condition(t){const s={member_code:t.member_code};return s},async fetching(t){let s=null,e=this.build_condition(t);try{console.log("每个人的账户 cond =",e),s=await this.conn.ex_get(this,"fund_wallet",e)}catch(i){}return s=s&&s.data?s.data:null,s}}},r=a,l=e(1001),o=(0,l.Z)(r,i,n,!1,null,null,null),c=o.exports},6776:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("div")},n=[],a={computed:{admin(){return this.$store.state.is_admin}},methods:{ser_detaii(t){let s=["",""];return"redeem"==t.change_type&&(s=t.change_detail.split("uuid"),s=s?s.map((t=>{const s=t.match(/\d+(.\d+)?/g);return s?s[0]:""})):["",""]),t.order_id=s[0],t.uuid=s[1],t},async many(t){this.admin||delete t.member_code,console.log("准备拉取Ewallet Log，条件 =",t);let s=await this.conn.ex_get(this,"user_wallet_log",t);return s=s&&s.message?s.message:[],console.log("拉取到 log 结果 =",s),s.map((t=>(t=this.ser_detaii(t),t)))},async wallet_req(t){let s=await this.conn.ex_get(this,"admin_wallet_request",t);return s=s&&s.data?s.data:[],s}}},r=a,l=e(1001),o=(0,l.Z)(r,i,n,!1,null,null,null),c=o.exports},8851:function(t,s,e){e.d(s,{Z:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("div",[s("span",{staticClass:"_btn_tag tag-reword",class:"tag-rew_"+t.extra},[t._v(" "+t._s(t.rewords[t.extra].txt)+" ")])])},n=[],a={name:"",props:["v"],data(){return{rewords:{issue:{txt:"發放"},redeem:{txt:"購買"},transfer:{txt:"轉賬"},manual:{txt:"手動更改"}}}},computed:{extra(){let t=this.v;return t&&(t=t.toLowerCase(),t=t.replace(/\s*/g,"")),t=t||"",t}}},r=a,l=e(1001),o=(0,l.Z)(r,i,n,!1,null,"261ce254",null),c=o.exports},7714:function(t,s,e){e.r(s),e.d(s,{default:function(){return A}});var i=function(){var t=this,s=t._self._c;return s("v-container",{staticClass:"qiong-txt-td",attrs:{fluid:""}},[s("member-msg-widget",{attrs:{_code:t.user.member_code}}),s("my-money-wallet",{staticClass:"mt-6"}),s("div",{staticClass:"py-3"}),s("mm-jf-in-record"),s("net-fund",{ref:"fundREF"}),t.user?s("sign",{on:{sign_Father:t.init}}):t._e()],1)},n=[],a=e(4686),r=e(251),l=e(7589),o=e(1742),c=function(){var t=this,s=t._self._c;return s("div",[s("qiong-header-filter",[s("span",{attrs:{slot:"header"},slot:"header"},[t._v(" 交易記錄 ")]),s("mmji-top-filter",{attrs:{slot:"filter"},on:{sign_Father:t.funni},slot:"filter"})],1),s("qiong-panel-element",{staticClass:"mobie-table",attrs:{need_space:!1}},[s("mmji-tr"),t.ioading?s("qiong-loading"):s("mmji-td",{attrs:{items:t.iogs}})],1),s("net-wallet-log",{ref:"iogREF"}),s("qiong-space",{attrs:{space:"7vw"}})],1)},d=[],u=e(7116),_=e(9374),p=e(7504),g=e(6306),v=e(6776),m=function(){var t=this,s=t._self._c;return t.items&&t.items.length>0?s("div",{staticClass:"px-7"},[t._l(t.many,(function(e,i){return s("div",{key:i,staticClass:"qiong-td qiong-txt-td py-2 lh-def fx-l"},[s("div",{staticClass:"qiong-wide-12"},[s("extra-lp-opera-view",{attrs:{v:e.change_type}})],1),s("div",{staticClass:"qiong-wide-10"},[t._v(t._s(e.user))]),s("div",{staticClass:"qiong-wide-11"},[e.order_id?s("span",[t._v(t._s(e.order_id))]):s("span",[t._v("--")])]),s("div",{staticClass:"qiong-wide-11"},[t._v(" "+t._s(e.wallet_original_value)+" ")]),s("div",{staticClass:"qiong-wide-15 fw-b"},[e.is_add?s("span",[t._v("+")]):s("span",[t._v("-")]),s("span",{staticClass:"px-1"},[t._v(" "+t._s(e.hkd)+" ")])]),s("div",{staticClass:"qiong-wide-12"},[t._v(t._s(e.wallet_new_value))]),s("div",{staticClass:"qiong-wide-15"},[t._v(t._s(t.view.ser_timed(e.date,!1,!1)))]),s("div",{staticClass:"qiong-wide-13"},[t._v(" "+t._s(t.view.view_remark(e.change_detail))+" ")])])})),s("qiong-space",{attrs:{space:"12px"}})],2):s("qiong-empty")},h=[],f=e(2898),w=e(882),x=e(8851),C={props:["items"],computed:{many(){let t=this.items;return t=t?t.map((t=>{t.is_add=!t.wallet_change.startsWith("-");const s=Number.parseFloat(t.wallet_change);return t.hkd=s>0?s:0-s,t})):[],t}},mounted(){},components:{QiongSpace:g.Z,QiongEmpty:f.Z,LoyaltyPvViewing:w.Z,ExtraLpOperaView:x.Z}},Z=C,b=e(1001),q=(0,b.Z)(Z,m,h,!1,null,null,null),y=q.exports,k=function(){var t=this,s=t._self._c;return s("div",{staticClass:"qiong-txt-12"},t._l(t.tabs,(function(e,i){return s("button",{key:i,staticClass:"btn-filter-pure",class:{"btn-filter-pure-active":t.now==e.v,"txt-txt_x3_red":t.now!=e.v},on:{click:function(s){t.now=e.v}}},[t._v(" "+t._s(e.txt)+" ")])})),0)},F=[],E={name:"",data(){return{now:0,tabs:[{txt:"全部",v:0},{txt:"購買",v:1},{txt:"轉賬",v:2},{txt:"發放",v:3}]}},watch:{now(t,s){this.switching(t)}},methods:{switching(t){this.option=t;let s={};0!=t?(1==t?s["type"]="redeem":2==t?s["type"]="transfer":3==t&&(s["type"]="issue"),this.$emit("sign_Father",s)):this.$emit("sign_Father",null)}}},Q=E,M=(0,b.Z)(Q,k,F,!1,null,"ace772bc",null),$=M.exports,L=function(){var t=this;t._self._c;return t._m(0)},H=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"px-7 extra-tr"},[s("div",{staticClass:"qiong-tr qiong-txt-tr"},[s("div",{staticClass:"qiong-wide-12"},[t._v("交易類型")]),s("div",{staticClass:"qiong-wide-10"},[t._v("用戶 ID")]),s("div",{staticClass:"qiong-wide-11"},[t._v("訂單編號")]),s("div",{staticClass:"qiong-wide-11"},[t._v("交易前余額")]),s("div",{staticClass:"qiong-wide-15"},[t._v("交易金額 (HKD)")]),s("div",{staticClass:"qiong-wide-12"},[t._v("交易後余額")]),s("div",{staticClass:"qiong-wide-15"},[t._v("交易時間")]),s("div",{staticClass:"qiong-wide-13"},[t._v("備註")])])])}],S={name:"",data(){return{}}},j=S,N=(0,b.Z)(j,L,H,!1,null,"195d5288",null),R=N.exports,P={components:{QiongHeaderFilter:p.Z,MmjiTopFilter:$,QiongPanelElement:_.Z,MmjiTr:R,MmjiTd:y,QiongSpace:g.Z,NetWalletLog:v.Z,QiongLoading:u.Z},name:"",data(){return{ioading:!0,iogs:[],iog_origins:[]}},computed:{user(){return this.$store.state.user_backend}},mounted(){this.switch()},methods:{async switch(){this.ioading=!0;let t=await this.$refs.iogREF.many({member_code:this.user.member_code});this.iog_origins=t,this.funni(null),setTimeout((t=>this.ioading=!1),300)},funni(t){let s=this.iog_origins;t&&(s=s.filter((s=>s.type==t.type))),this.iogs=s}}},T=P,W=(0,b.Z)(T,c,d,!1,null,"03f55672",null),D=W.exports,V={components:{MemberMsgWidget:a.Z,MyMoneyWallet:r.Z,NetFund:l.Z,Sign:o.Z,MmJfInRecord:D},name:"",data(){return{can:!1}},computed:{user(){let t=this.$store.state.user_backend;return t||null}},mounted(){},methods:{async init(){}}},I=V,K=(0,b.Z)(I,i,n,!1,null,"eb219e98",null),A=K.exports},251:function(t,s,e){e.d(s,{Z:function(){return x}});var i=function(){var t=this,s=t._self._c;return s("div",[s("div",[s("qiong-header",[t._v("電子錢包")]),s("qiong-panel-element",{attrs:{need_space:!1}},[s("qiong-space",{attrs:{space:"2vw"}}),s("wallet-list",{attrs:{_item:t.wallet}}),s("div",{staticClass:"t-r py-3 px-7"},[t.hide_transfer?t._e():s("div",{staticClass:"a-sus_sec d-ib pt-3",on:{click:function(s){return t.$router.push("/home/loyalty/transfer_plus")}}},[s("span",[t._v("我要轉賬")]),s("v-icon",{staticClass:"qiong-txt-16"},[t._v("mdi-arrow-top-right")])],1),t.last_upd?s("div",{staticClass:"t-r"},[s("span",{staticClass:"a-sus_sec"},[s("v-icon",{staticClass:"qiong-txt-16"},[t._v("mdi-calendar-blank")]),t._v("   "),s("span",{staticClass:"hv"},[t._v("最後更新於："+t._s(t.view.ser_timed(t.last_upd,!0,!1)))])],1)]):t._e()])],1)],1),s("net-fund",{ref:"fundREF"}),t.user?s("sign",{on:{sign_Father:t.init}}):t._e()],1)},n=[],a=function(){var t=this,s=t._self._c;return t.result.length>1?s("v-row",{staticClass:"px-7 t-c qiong-pt-15 pb-2"},t._l(t.result,(function(e,i){return s("v-col",{key:i,attrs:{sm:4,cols:12}},[e?s("div",{staticClass:"taped"},[s("div",{staticClass:"tap-header",class:{"txt-scd_deep_son_ipt":i==t._page},domProps:{innerHTML:t._s(e.txt)}}),s("div",{staticClass:"tap-content pt-2",class:{"txt-scd_son_ipt":i==t._page}},[t._v(t._s(e.content)),s("span",[t._v(t._s(e.unit))])])]):t._e()])})),1):s("nav",{staticClass:"fx-c t-c"},[t._l(t.result,(function(e,i){return s("div",{key:i,staticClass:"taped"},[s("div",{staticClass:"tap-header"},[t._v("   "+t._s(e.txt)+"   ")]),s("div",{staticClass:"tap-content pt-2 op-95 money-shd"},[t._v(t._s(e.content)),s("span",{staticClass:"pl-3 n"},[t._v(t._s(e.unit))])])])})),s("div",{staticClass:"pb-3"})],2)},r=[],l={name:"",props:["_item"],data(){return{loading:!0,tutal:[]}},computed:{result(){return this._item.length>1?this._item.map(((t,s)=>{this.tutal[s].content=t||0})):this.tutal=[{txt:"個人賬戶積分總值",content:this._item?this._item[0]:"0",unit:"HKD"}],this.tutal}}},o=l,c=e(1001),d=(0,c.Z)(o,a,r,!1,null,"08296dd4",null),u=d.exports,_=e(6306),p=e(8884),g=e(9374),v=e(7589),m=e(1742),h={components:{WalletList:u,QiongPanelElement:g.Z,QiongSpace:_.Z,QiongHeader:p.Z,NetFund:v.Z,Sign:m.Z},props:["hide_transfer"],data(){return{wallet:[],last_upd:""}},mounted(){this.init()},computed:{user(){let t=this.$store.state.user_backend;return t||null}},methods:{async init(){let t=await this.$refs.fundREF.fetching(this.user);t&&t.length>=1&&(this.wallet=t.map((t=>(this.last_upd=t.updated_at,t.wallet))))}}},f=h,w=(0,c.Z)(f,i,n,!1,null,"5779d514",null),x=w.exports},4686:function(t,s,e){e.d(s,{Z:function(){return v}});var i=function(){var t=this,s=t._self._c;return s("div",{},[s("qiong-header",{attrs:{extra_calss:"pl-7"}},[t._v(" "+t._s(t.$t("HEADER.user_msg"))+" ")]),s("qiong-panel-element",{attrs:{need_space:!1,extra_class:"mh-0"}},[s("div",{staticClass:"text-right px-7 qiong-pt-10"},[s("time-msg-viewing")],1),t.has?s("member-msg-header-widget",{staticClass:"px-7",attrs:{_chronu_id:t._chronu,_member_code:t._code}}):s("qiong-loading"),s("qiong-space",{attrs:{space:"1.2vh"}}),s("qiong-space",{attrs:{space:"0.8vw"}})],1)],1)},n=[],a=e(9374),r=e(8884),l=e(7116),o=e(6306),c=e(234),d=e(3137),u={components:{QiongHeader:r.Z,QiongPanelElement:a.Z,MemberMsgHeaderWidget:d.Z,QiongSpace:o.Z,QiongLoading:l.Z,TimeMsgViewing:c.Z},props:["_code","_chronu"],computed:{cotion(){return this.$store.state.user_collection},has(){if(this.cotion&&this.cotion.length>0)return!0}}},_=u,p=e(1001),g=(0,p.Z)(_,i,n,!1,null,null,null),v=g.exports}}]);
//# sourceMappingURL=6303.2e974b0a.js.map