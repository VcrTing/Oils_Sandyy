"use strict";(self["webpackChunkoils"]=self["webpackChunkoils"]||[]).push([[8825],{8384:function(t,e,s){s.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"pager px-0 an_upper"},[e("li",{on:{click:function(e){return t._next(t.now-1)}}},[t._v("上一頁")]),e("li",{staticClass:"px-2 ml-1",on:{click:function(e){return t._next(1)}}},[e("v-icon",{staticClass:"qiong-txt-14"},[t._v("mdi-chevron-double-left")])],1),e("li",{staticClass:"pager_fly"},[e("input",{attrs:{type:"text",id:"inpREF"},domProps:{value:t.now},on:{change:function(e){return t.go()}}}),e("span",[t._v("/ "+t._s(t.pages))])]),e("li",{staticClass:"px-2 mr-1",on:{click:function(e){return t._next(t.pages)}}},[e("v-icon",{staticClass:"qiong-txt-14"},[t._v("mdi-chevron-double-right")])],1),e("li",{on:{click:function(e){return t._next(t.now+1)}}},[t._v("下一頁")])])},n=[],a={props:{_count:Number,_limit:Number},data(){return{now:1}},watch:{now(t,e){this.$emit("page_Father",(t-1)*this._limit,this._limit*t)}},computed:{pages(){let t=Math.ceil(this._count/this._limit);return t=t||1,t}},methods:{go(t=null){t=t||document.getElementById("inpREF").value,this._next(t)},_next(t){t=null!=t?t:1,t=isNaN(t)?1:t,t=t<=0?this.pages:t,t=t>this.pages?1:t,this.now=t,document.getElementById("inpREF").value=t}}},l=a,r=s(1001),o=(0,r.Z)(l,i,n,!1,null,null,null),c=o.exports},1304:function(t,e,s){s.d(e,{Z:function(){return u}});var i=function(){var t=this,e=t._self._c;return e("div",[e("v-row",{staticClass:"qiong-panel_element qpe-mh mobie-panel",class:t.extra_class},[e("v-col",{staticClass:"px-0 qpe_inner py-0",attrs:{cols:t.cols}},[t._t("default")],2),t.need_space?e("v-col",{staticClass:"inner-empty"},[e("qiong-space",{attrs:{space:"7vh"}},[t._v(" ")])],1):t._e()],1)],1)},n=[],a=s(934),l=s(7667),r={name:"",props:{need_space:{type:Boolean,default:!0},cols:{type:Number,default:12},extra_class:{type:String}},components:{QiongSpace:a.Z,QiongPageLing:l.Z},data(){return{}}},o=r,c=s(1001),d=(0,c.Z)(o,i,n,!1,null,"94a8aac0",null),u=d.exports},4221:function(t,e,s){s.d(e,{Z:function(){return u}});var i=function(){var t=this,e=t._self._c;return e("div",[t.need_top?e("pti-go-top"):t._e(),e("qiong-space",{attrs:{space:t.height}})],1)},n=[],a=s(5725),l=s(934),r={components:{QiongSpace:l.Z,PtiGoTop:a.Z},name:"",props:{need_top:{type:Boolean,default:!0},height:{type:String,default:"210px"}},data(){return{}}},o=r,c=s(1001),d=(0,c.Z)(o,i,n,!1,null,"02d07b41",null),u=d.exports},4359:function(t,e,s){s.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return 1==t.bigger?e("v-row",{staticClass:"pager-header"},[e("v-col",{staticClass:"pl-7",class:t.extra_calss,attrs:{cols:12,sm:4}},[t._t("header")],2),e("v-col",{staticClass:"px-7 fx-r0",class:t.extra_calss,attrs:{cols:12,sm:8}},[t._t("filter")],2)],1):e("v-row",{staticClass:"pager-header"},[e("v-col",{staticClass:"pl-7",class:t.extra_calss,attrs:{cols:12,sm:6}},[t._t("header")],2),e("v-col",{staticClass:"px-7 fx-r0",class:t.extra_calss,attrs:{cols:12,sm:6}},[t._t("filter")],2)],1)},n=[],a={components:{},name:"",props:{bigger:{type:Number,default:1},extra_calss:{type:String}},data(){return{}}},l=a,r=s(1001),o=(0,r.Z)(l,i,n,!1,null,"34ab2fbb",null),c=o.exports},7667:function(t,e,s){s.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("v-col",{staticClass:"py-0 ma-0 pa-0",attrs:{cols:"12"}},[e("div",{staticClass:"qiong-line",class:t.ex_class})])},n=[],a={name:"",props:{ex_class:{type:String}},data(){return{}}},l=a,r=s(1001),o=(0,r.Z)(l,i,n,!1,null,"8711cf2c",null),c=o.exports},5725:function(t,e,s){s.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pti-go-top hand",class:{"turn-bown":t.is_down,"turn-up":!t.is_down},on:{click:t.toDis}},[e("v-icon",[t._v(" mdi-arrow-up ")])],1)},n=[],a={name:"",data(){return{is_down:!0,screenH:0,show:!1}},mounted(){this.screenH=window.screen.height,window.addEventListener("scroll",this.handleScroll,!0)},methods:{handleScroll(){let t=document.documentElement.scrollTop||document.body.scrollTop;t>this.screenH-300?this.is_down=!1:this.is_down=!0,this.show=document.body.offsetHeight>this.screenH},toDis(){this.is_down?this.toDown():this.toTop(),this.is_down=!this.is_down},toTop(){let t=document.documentElement.scrollTop||document.body.scrollTop;const e=setInterval((()=>{document.body.scrollTop=document.documentElement.scrollTop=t-=50,t<=0&&(clearInterval(e),this.$emit("finish_Father"))}),10)},toDown(){window.scrollTo(0,document.body.scrollHeight)}}},l=a,r=s(1001),o=(0,r.Z)(l,i,n,!1,null,"0ad07901",null),c=o.exports},3233:function(t,e,s){s.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return-1==t.bigger?e("div",{staticClass:"loading-small"}):1==t.bigger?e("div",{staticClass:"loading-huge"}):e("div",{staticClass:"loading"})},n=[],a={name:"LoadingSmall",props:{bigger:{type:Number,default:1}}},l=a,r=s(1001),o=(0,r.Z)(l,i,n,!1,null,"30dfa814",null),c=o.exports},2245:function(t,e,s){s.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div")},n=[],a={name:"",data(){return{}},methods:{async _lunching(t){let e=await this.conn.ex_get(this,"browse_LP_log",t);return e=e&&e.message?e.message:[],e.map((t=>(t.is_plus=this._is_plus(t.LP_difference),t.LP_difference=this._ser_lp(t.LP_difference),t)))},async LpRecord(t){return await this._lunching(t)},async LpAddRecord(t){return t.description="additional",await this._lunching(t)},_ser_lp(t){return t?Math.abs(Number.parseFloat(t)):0},_is_plus(t){return t?t.indexOf("+")>=0:null}}},l=a,r=s(1001),o=(0,r.Z)(l,i,n,!1,null,"8d985e24",null),c=o.exports},6967:function(t,e,s){s.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("span",{staticClass:"qiong-txt-10"},[1==t.v?e("span",{staticClass:"tag-audit"},[t._v(" LP 等級變更 ")]):e("span",{staticClass:"tag-auditing"},[t._v(" LP 積分變更 ")])])},n=[],a={props:["v"]},l=a,r=s(1001),o=(0,r.Z)(l,i,n,!1,null,null,null),c=o.exports},8825:function(t,e,s){s.r(e),s.d(e,{default:function(){return ot}});var i=function(){var t=this,e=t._self._c;return e("v-container",{staticClass:"qiong-txt-td",attrs:{fluid:""}},[e("mllamc-top-filter",{ref:"topREF",attrs:{typed:t.def_typed},on:{submit_Father:t.switching}}),e("qiong-header-filter",[e("span",{attrs:{slot:"header"},slot:"header"},[t._v("LP 資料變更記錄")]),e("mllamc-top-bar",{attrs:{slot:"filter"},on:{sign_Father:t.typed},slot:"filter"})],1),2==t.def_typed?e("qiong-panel-element",{staticClass:"mobie-table",attrs:{need_space:!1}},[e("mllamc-lp-tr"),t.loading?e("qiong-loading"):e("mllamc-lp-body",{attrs:{_items:t.records}})],1):e("qiong-panel-element",{staticClass:"mobie-table",attrs:{need_space:!1}},[e("mllamc-tr"),t.loading?e("qiong-loading"):e("mllamc-body",{attrs:{_items:t.records}})],1),e("div",{staticClass:"fx-c mt-5 pt-3"},[t.records_page&&!t.loading?e("pagenation",{attrs:{_limit:t.limit,_count:t.records_page.length},on:{page_Father:t.pager}}):t._e()],1),e("table-pager-footer"),e("net-member-lp-level-record",{ref:"recLpLevelREF"}),e("net-lp-plus-record",{ref:"lpPlusREF"})],1)},n=[],a=s(8384),l=s(1304),r=s(4221),o=s(4359),c=s(6481),d=s(2245),u=function(){var t=this,e=t._self._c;return e("div")},_=[],p={methods:{async LpLevelAuto(t){let e=await this.conn.ex_get(this,"browse_rank_change_auto",t);if(e)return e=e.data?e.data:null,this.ser_result(e)},async LpLevelManual(t){let e=await this.conn.ex_get(this,"browse_rank_change_manual",t);if(e)return e=e.data?e.data:null,this.ser_result(e)},ser_result(t){return t.map((t=>(t.content=this._ser_txt(t.change_display),this._ser_type(t))))},_ser_type(t){return"rank"==t.log_type?t.typed=1:t.typed=2,t},_ser_txt(t){return t.replace("start_rank","LP 起始等級變更").replace("rank","LP 等級變更")+"(級)"}}},v=p,g=s(1001),m=(0,g.Z)(v,u,_,!1,null,null,null),h=m.exports,f=function(){var t=this,e=t._self._c;return t._items&&t._items.length>0?e("div",{staticClass:"px-7 mb-3"},t._l(t._items,(function(s,i){return e("div",{key:i,staticClass:"qiong-td qiong-txt-td py-3 lh-def fx-l"},[e("div",{staticClass:"qiong-wide-10"},[t._v(" "+t._s(s.user.member_code)+" ")]),e("div",{staticClass:"qiong-wide-20"},[t._v(" "+t._s(s.user.display_name)+" ")]),e("div",{staticClass:"qiong-wide-15 pr-0"},[t._v(" "+t._s(t.view.ser_timed(s.date,!1,!1))+" ")]),e("div",{staticClass:"qiong-wide-13 t-c pr-0"},[e("extra-change-type-view",{attrs:{v:s.typed}})],1),e("div",{staticClass:"qiong-wide-24 pl-2"},[t._v(" "+t._s(s.content)+" ")]),e("div",{staticClass:"qiong-wide-17"},[t._v(" "+t._s(s.remark)+" ")])])})),0):e("qiong-empty")},w=[],C=s(3233),b=s(6967),x={components:{QiongEmpty:C.Z,ExtraChangeTypeView:b.Z},props:["_items"],mounted(){console.log("this.items =",this._items)},data(){return{}}},y=x,q=(0,g.Z)(y,f,w,!1,null,"7e353c84",null),Z=q.exports,L=function(){var t=this,e=t._self._c;return e("div",[t._items&&t._items.length>0?e("div",{staticClass:"lh-18 pb-2 td-def"},t._l(t._items,(function(s,i){return e("div",{key:i,staticClass:"qiong-pt-3 pb-1 td-hr px-7"},[e("nav",{staticClass:"qiong-td qiong-txt-td"},[e("div",{staticClass:"qiong-wide-8 fw-b"},[t._v(" "+t._s(s.user)+" ")]),e("div",{staticClass:"qiong-wide-13"},[t._v(" "+t._s(s.user_name)+" ")]),e("div",{staticClass:"qiong-wide-9"},[t._v(" "+t._s(t.view.backend.view_lp_opera_typed(s.type))+" ")]),e("div",{staticClass:"qiong-wide-8"},[t._v(" "+t._s(s.order_uuid)+" ")]),e("div",{staticClass:"qiong-wide-7"},[t._v(" "+t._s(s.order_pv)+" ")]),e("div",{staticClass:"qiong-wide-9"},[s.LP_percentage?e("span",[t._v(" "+t._s(100*s.LP_percentage)+" % ")]):t._e()]),e("div",{staticClass:"qiong-wide-10"},[s.is_plus?e("span",{staticClass:"txt-sub_x2"},[t._v("+ ")]):e("span",{staticClass:"txt-sub_x2"},[t._v("- ")]),t._v(" "+t._s(s.LP_difference)+" LP ")]),e("div",{staticClass:"qiong-wide-6 txt-sus"},[t._v(" "+t._s(s.wallet_before)+" ")]),e("div",{staticClass:"qiong-wide-8 pr-0"},[t._v(" "+t._s(s.wallet_after)+" ")]),e("div",{staticClass:"qiong-wide-13 pr-0"},[t._v(" "+t._s(t.view.ser_timed(s.date,!1,!1))+" ")]),e("div",{staticClass:"qiong-wide-9 fx-s pr-0"},[t._v(" "+t._s(s.remark)+" ")])])])})),0):e("qiong-empty")],1)},k=[],P={components:{QiongEmpty:C.Z},name:"",props:["_items"],mounted(){console.log("this.items =",this._items)},data(){return{itemss:[]}}},F=P,E=(0,g.Z)(F,L,k,!1,null,"445fcb4d",null),T=E.exports,N=function(){var t=this;t._self._c;return t._m(0)},R=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"px-7 extra-tr pb-2"},[e("div",{staticClass:"qiong-tr qiong-txt-tr pb-1"},[e("div",{staticClass:"qiong-wide-8"},[t._v(" 變更對象 ")]),e("div",{staticClass:"qiong-wide-13"},[t._v(" 用戶名 ")]),e("div",{staticClass:"qiong-wide-9"},[t._v(" 類型 ")]),e("div",{staticClass:"qiong-wide-8"},[t._v(" 訂單編號 ")]),e("div",{staticClass:"qiong-wide-7"},[t._v(" 訂單 PV ")]),e("div",{staticClass:"qiong-wide-9"},[t._v(" LP 百分比 ")]),e("div",{staticClass:"qiong-wide-10"},[t._v(" 積分變更 ")]),e("div",{staticClass:"qiong-wide-6"},[t._v(" 原積分 ")]),e("div",{staticClass:"qiong-wide-8"},[t._v(" 變更結果 ")]),e("div",{staticClass:"qiong-wide-13"},[t._v(" 變更時間 ")]),e("div",{staticClass:"qiong-wide-9"},[t._v(" 備註 ")])])])}],M={},S=M,$=(0,g.Z)(S,N,R,!1,null,null,null),Q=$.exports,B=function(){var t=this,e=t._self._c;return e("div",{staticClass:"qiong-txt-12 mobie-pt-12"},t._l(t.tabs,(function(s,i){return e("button",{key:i,staticClass:"btn-filter-pure",class:{"btn-filter-pure-active":t.now==s.v,"txt-txt_x3_red":t.now!=s.v},on:{click:function(e){return t.switching(s.v)}}},[t._v(" "+t._s(s.txt)+" ")])})),0)},D=[],H={name:"",data(){return{now:2,tabs:[{txt:"LP 積分變更",v:2},{txt:"LP 等級變更",v:1}]}},mounted(){},methods:{switching(t){this.now=t,this.$emit("sign_Father",t)}}},I=H,O=(0,g.Z)(I,B,D,!1,null,"0957c455",null),A=O.exports,V=function(){var t=this,e=t._self._c;return e("v-row",{staticClass:"bar-filter px-7 mt-0 mb-1"},[e("div",{staticClass:"mobie-show pt-3"}),e("div",{staticClass:"v_col qiong-pt-15"},[e("div",{staticClass:"d-ib"},[e("label",[t._v("變更時間"+t._s(t.typed))]),e("div",{staticClass:"input-time"},[t.loading?e("input",{attrs:{type:"text",placeholder:"起始時間"}}):e("date-select",{attrs:{date:t.funnel.date_gte},on:{timed_Father:e=>t.funnel.date_gte=e}})],1),e("span",{staticClass:"bf_sub"},[t._v("至")]),e("div",{staticClass:"input-time"},[t.loading?e("input",{attrs:{type:"text",placeholder:"結束時間"}}):e("date-select",{attrs:{date:t.funnel.date_lt},on:{timed_Father:e=>t.funnel.date_lt=e}})],1)]),e("div",{staticClass:"d-ib mobie-pt-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.funnel.user,expression:"funnel.user"}],attrs:{type:"text",placeholder:"會員編號"},domProps:{value:t.funnel.user},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)},input:function(e){e.target.composing||t.$set(t.funnel,"user",e.target.value)}}})]),e("div",{staticClass:"mobie-show pt-6"}),e("button",{staticClass:"submit an_lefter",on:{click:t.submit}},[e("v-icon",[t._v("mdi-filter-outline")]),t._v(" 篩選 ")],1),e("button",{staticClass:"txt-acc_sub",on:{click:t.reset}},[e("v-icon",[t._v("mdi-reload")]),t._v(" 重置 ")],1)])])},j=[],G=s(6797),z=s.n(G),J=s(4711),K={components:{DateSelect:J.Z},name:"",props:{typed:Number,_funnl:Object},data(){return{funnel:{user:"",date_gte:"",date_lt:""},loading:!0}},mounted(){this.reset()},computed:{chronu(){return this.$store.state.chronus}},methods:{is_number(t){return!isNaN(Number.parseInt(t))},submit(){let t={};const e=this.funnel;for(let s in e)e[s]&&("user"==s?this.is_number(e[s])?t["member_code"]=e[s]:t["user_name"]=e[s]:t[s]=e[s]);this.$emit("submit_Father",t)},reset(){this.funnel.user="",this.funnel.date_lt=this.chronu.end?z()(this.chronu.end).format("yyyy-MM-DD"):this.view.getToday(),this.funnel.date_gte=this.chronu.start,this.submit(),this.loading=!1},result(){let t={},e=this.funnel;for(let s in e)e[s]&&("user"==s?t["member_code"]=e[s]:t[s]=e[s]);return t}}},U=K,W=(0,g.Z)(U,V,j,!1,null,"38966a50",null),X=W.exports,Y=function(){var t=this;t._self._c;return t._m(0)},tt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"px-7 extra-tr"},[e("div",{staticClass:"qiong-tr qiong-txt-tr"},[e("div",{staticClass:"qiong-wide-10"},[t._v(" 會員編號 ")]),e("div",{staticClass:"qiong-wide-20"},[t._v(" 會員名稱 ")]),e("div",{staticClass:"qiong-wide-15"},[t._v(" 變更時間 ")]),e("div",{staticClass:"qiong-wide-13 t-c"},[t._v(" 類別 ")]),e("div",{staticClass:"qiong-wide-24 pl-2"},[t._v(" 變更內容 ")]),e("div",{staticClass:"qiong-wide-17"},[t._v(" 備註 ")])])])}],et={},st=et,it=(0,g.Z)(st,Y,tt,!1,null,null,null),nt=it.exports,at={methods:{typed(t){this.def_typed=t,this.switching(this.$refs.topREF.result())},async switching(t){this.loading=!0,console.log("CONT =",t),this.records_origin=await this.origin(t),this.pager(0,this.limit),setTimeout((t=>this.loading=!1),600)},funnel(t){return t=this.records_origin,this.records_page=t,t},async origin(t){return t._limit=500,1==this.def_typed?await this.$refs.recLpLevelREF.LpLevelAuto(t):2==this.def_typed?await this.$refs.lpPlusREF.LpRecord(t):void 0},pager(t,e){let s=this.funnel();console.log("res =",s.slice(t,e),t,e),this.records=s.slice(t,e)}},data(){return{records_origin:null,records_page:null,records:null,loading:!0,def_typed:2,limit:30}},components:{QiongHeaderFilter:o.Z,MllamcTopBar:A,QiongPanelElement:l.Z,MllamcBody:Z,MllamcTr:nt,MllamcTopFilter:X,QiongLoading:c.Z,Pagenation:a.Z,TablePagerFooter:r.Z,NetMemberLpLevelRecord:h,MllamcLpBody:T,MllamcLpTr:Q,NetLpPlusRecord:d.Z}},lt=at,rt=(0,g.Z)(lt,i,n,!1,null,"51226962",null),ot=rt.exports}}]);
//# sourceMappingURL=8825.3a7e87f6.js.map