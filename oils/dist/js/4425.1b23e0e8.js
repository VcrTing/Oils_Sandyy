"use strict";(self["webpackChunkoils"]=self["webpackChunkoils"]||[]).push([[4425],{1336:function(t,e,s){s.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("div")},a=[],i={name:"",data(){return{}},methods:{async fecthingUser(t){let e=await this.conn.get(this.api.users,this.$store.state.token,{member_code:t});if(e)return e=e?e[0]:{},e}}},r=i,l=s(1001),o=(0,l.Z)(r,n,a,!1,null,"ed9069a8",null),c=o.exports},1452:function(t,e,s){s.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"alert alert-warning pa-3 px-7"},[e("span",[t._t("default")],2)])},a=[],i={name:"",data(){return{}}},r=i,l=s(1001),o=(0,l.Z)(r,n,a,!1,null,"8bc171c4",null),c=o.exports},4425:function(t,e,s){s.r(e),s.d(e,{default:function(){return F}});var n=function(){var t=this,e=t._self._c;return e("mc-form-page-layout",{attrs:{no_switch:!0,header:"用戶資金操作"},on:{back_Father:function(e){return t.$router.go(-1)}}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.adding,expression:"!adding"}]},[e("ew-admin-form",{ref:"formREF"}),e("div",{staticClass:"btn-transfer an_upper qiong-pt-15 qiong-txt-14"},[e("button",{staticClass:"reset",on:{click:t.reset}},[e("v-icon",{staticClass:"qiong-txt-16"},[t._v("mdi-refresh")]),t._v(" 重置表單 ")],1),e("button",{staticClass:"btn-pri",on:{click:t.submit}},[e("v-icon",{staticClass:"qiong-txt-16 mr-3"},[t._v("mdi-check-underline")]),t._v(" 提交結果 ")],1)])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.adding,expression:"adding"}]},[t.succ?e("div",[e("sts-opera-shimmer"),e("div",{staticClass:"fx-c py-8"},[e("button",{staticClass:"btn-sim an_upper",on:{click:t.refresh}},[t._v("確認")])])],1):e("qiong-loading",{staticClass:"an_upper",attrs:{bigger:1}})],1)])},a=[],i=s(7116),r=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"fx-c sos-succ py-6"},[e("v-icon",{staticClass:"qiong-txt-22"},[t._v(" mdi-check-circle ")]),e("div",{staticClass:"qiong-txt-18"},[t._v("  操作成功！！！ ")])],1)])},l=[],o={},c=o,u=s(1001),d=(0,u.Z)(c,r,l,!1,null,null,null),m=d.exports,h=s(8100),f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"form-def form-transfer"},[e("v-row",[e("v-col",{attrs:{cols:"12",sm:5}},[e("label",[t._v("收款人編號")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.funnel.member_code,expression:"funnel.member_code"}],attrs:{type:"text",placeholder:"請輸入收款人的編號"},domProps:{value:t.funnel.member_code},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.fetchingUser.apply(null,arguments))},change:t.fetchingUser,input:function(e){e.target.composing||t.$set(t.funnel,"member_code",e.target.value)}}})]),e("v-col",{attrs:{cols:"12",sm:7}},[e("label",[t._v("收款人")]),e("div",{staticClass:"fx-l input input-fix fx-l"},[t.user_loading?e("v-icon",{staticClass:"qiong-txt-18 ani-rotate loading"},[t._v("mdi-loading")]):e("p",[t.user?e("span",[e("v-icon",{staticClass:"qiong-txt-16"},[t._v("mdi-account-circle-outline")]),e("span",[t._v(" "+t._s(t.user.display_name)+" ")])],1):e("span",[t._v(" (自動檢索) ")])])],1)])],1),e("v-row",{staticClass:"transfer-wrapper"},[e("v-col",{attrs:{col:"12",sm:4,cols:"12"}},[e("label",{staticClass:"form-money"},[t._v("發款數")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.funnel.ewallet_change,expression:"funnel.ewallet_change"}],staticClass:"input-transfer",attrs:{type:"number",placeholder:"正數為加負數為減"},domProps:{value:t.funnel.ewallet_change},on:{input:function(e){e.target.composing||t.$set(t.funnel,"ewallet_change",e.target.value)}}})]),e("v-col",{attrs:{col:"12",sm:8,cols:"12"}},[e("label",[t._v("收款人現有余額")]),e("button",{staticClass:"input input-fix txt-money fw-b",on:{click:()=>{}}},[t._v(" "+t._s(t.hkd?t.hkd:0)+"  HKD ")])])],1),e("v-row",[e("v-col",[e("label",[t._v("備註/留言")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.funnel.remark,expression:"funnel.remark"}],staticClass:"input-transfer",attrs:{type:"text",placeholder:"請輸入備註或留言"},domProps:{value:t.funnel.remark},on:{input:function(e){e.target.composing||t.$set(t.funnel,"remark",e.target.value)}}})])],1),e("widget-user-by-member-code",{ref:"userREF"}),t.msg?e("div",{staticClass:"pt-3 qiong-txt-16 anime-later"},[e("qiong-space",{attrs:{space:"0.5vw"}}),e("dialog-alert",[t._v(t._s(t.msg))])],1):t._e()],1)},p=[],v=s(1336),_=s(3186),g=s(6306),b=s(1452),w={components:{DateSelect:_.Z,WidgetUserByMemberCode:v.Z,DialogAlert:b.Z,QiongSpace:g.Z},data(){return{user:null,user_loading:!1,msg:"",funnel:{num:0,remark:"",member_code:""},loading:!0}},mounted(){this.reset()},computed:{hkd(){let t=this.user?this.user.e_wallet:null;return t?t.wallet:0}},watch:{"funnel.num":function(t,e){t&&(t=Number.parseFloat(t),isNaN(t)&&t<0&&(this.funnel.ewallet_change=0))}},methods:{validCode(){let t=this.funnel.member_code;return t=Number.parseInt(t),!!(t&&t>=203e3)},validNum(){let t=this.funnel.ewallet_change;return t=Number.parseInt(t),t=!(!t||0==t),t},async fetchingUser(){if(this.validCode()){this.user_loading=!0;let t=await this.$refs.userREF.fecthingUser(this.funnel.member_code);t&&this.setUser(t)}else this.setUser(null)},setUser(t){this.user_loading=!0,this.user=t,setTimeout((t=>this.user_loading=!1),400)},alert(t){this.msg=t,setTimeout((t=>this.msg=""),4400)},submit(){if(this.validCode()){if(this.validNum())return this.funnel;this.msg="檢測到 LP積分數字有誤，請檢查輸入。"}else this.msg="檢測到 用戶編號 為空或輸入有誤，請檢查輸入。";setTimeout((t=>this.msg=""),4400)},reset(){this.loading=!0,this.setUser(null),this.funnel={ewallet_change:null,member_code:"",remark:""},setTimeout((t=>{this.loading=!1}),400)}}},x=w,C=(0,u.Z)(x,f,p,!1,null,"5f7ab1cc",null),k=C.exports,y={components:{McFormPageLayout:h.Z,EwAdminForm:k,QiongLoading:i.Z,StsOperaShimmer:m},data(){return{adding:!1,succ:!1}},methods:{reset(){this.$refs.formREF.reset()},submit(){try{let t=this.$refs.formREF.submit();t.ewallet_change=Number.parseFloat(t.ewallet_change),t&&this._submit("",t)}catch(t){alert("網絡錯誤！！！")}},refresh(){this.reset(),this.succ=!1,this.adding=!1},async _submit(t,e){this.adding=!0;let s=await this.conn.ex_post(this,"admin_wallet_modify",e);s&&setTimeout((t=>this.succ=!0),600)}}},q=y,Z=(0,u.Z)(q,n,a,!1,null,"a1b15f66",null),F=Z.exports},8100:function(t,e,s){s.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("v-container",{staticClass:"px-0",attrs:{fluid:""}},[e("div",{staticClass:"fx-l py-3 pl-5 txt-header"},[e("div",{staticClass:"d-ib hand",on:{click:function(e){return t.$emit("back_Father")}}},[e("v-icon",{staticClass:"qiong-txt-22"},[t._v("mdi-chevron-left")])],1),e("div",{staticClass:"pl-2 fw-b hand",on:{click:function(e){return t.$emit("back_Father")}}},[t._v(" "+t._s(t.header)+" ")])]),e("div",{staticClass:"panel-pure txt-def"},[t.no_switch?t._e():e("div",{staticClass:"fx-s"},[e("div"),e("div",{staticClass:"qiong-txt-10 changer"},t._l(t.tabs,(function(s,n){return e("button",{key:n,staticClass:"ml-5 hand",class:{"btn-pri-thin py-2 px-6 fw-b":t.now==s.path,"txt-pri":t.now!=s.path},on:{click:function(e){return t.$router.push(s.path)}}},[t._v(" "+t._s(s.txt)+" ")])})),0)]),e("div",{staticClass:"qiong-txt-12 upper"},[t._t("default")],2)]),e("div",{staticClass:"pti-go-top hand",on:{click:function(e){return t.$emit("back_Father")}}},[e("v-icon",[t._v("mdi-chevron-left")])],1),e("div",{staticClass:"mobie-for-form"})])},a=[],i={name:"",props:["header","no_switch"],data(){return{}},computed:{now(){let t=this.$route.path;return t=t?t.split("/"):null,t=t?t[t.length-1]:null,t},tabs(){return[{txt:"增加 LP 積分",path:"form_lp_plus"},{txt:"更改會員 LP 等級",path:"form_level_change"},{txt:"重啟會員 LP 資格",path:"form_reload_qualify"}]}}},r=i,l=s(1001),o=(0,l.Z)(r,n,a,!1,null,"7b50eaad",null),c=o.exports}}]);
//# sourceMappingURL=4425.1b23e0e8.js.map