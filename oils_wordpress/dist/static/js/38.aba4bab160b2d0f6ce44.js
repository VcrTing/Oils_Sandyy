webpackJsonp([38],{PGP2:function(e,t){},ssRn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Xxa5"),a=n.n(s),r=n("exGp"),i=n.n(r),o=n("akmo"),u=n("gBtx"),l=n.n(u),c=n("Gi8X"),m=n("YPBt"),v=n("Vv01"),f=n("Um5R"),d={components:{DateSelect:m.a,WidgetUserByMemberCode:c.a,DialogAlert:v.a,QiongSpace:f.a},name:"",data:function(){return{user:null,user_loading:!1,msg:"",funnel:{mark:"",num:10,num_origin:2,member_code:""},loading:!0}},mounted:function(){this.reset()},methods:{geneTimed:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24,t=[],n=0;n<e;n++)t.push(n);return t},reciveDate:function(e){var t=this,n=this.view.getToday(),s=this.view.judge_date(e,n);this.funnel.date=s?e:n,s||(this.loading=!0,setTimeout(function(e){t.loading=!1},600))},validHour:function(){},validMark:function(){},validCode:function(){var e=this.funnel.member_code;return e=!!((e=l()(e))&&e>=203e3)},validNum:function(){var e=this.funnel.num;return e=!(!(e=l()(e))||0==e)},fetchingUser:function(){var e=this;return i()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.validCode()){t.next=8;break}return e.user_loading=!0,t.next=4,e.$refs.userREF.fecthingUser(e.funnel.member_code);case 4:(n=t.sent)&&e.setUser(n),t.next=9;break;case 8:e.setUser(null);case 9:case"end":return t.stop()}},t,e)}))()},setUser:function(e){var t=this;this.user_loading=!0,this.user=e,console.log("LP LEVEL 用户的数据 =",e),setTimeout(function(e){return t.user_loading=!1},400)},submit:function(){var e=this;if(this.validCode())if(this.validNum()){if(this.user.member_code)return this.funnel.code=this.user.member_code,this.funnel;this.msg="未檢測到用戶的編號。"}else this.msg="檢測到 會員等級數字 為空，請檢查輸入。";else this.msg="檢測到 用戶編號 為空或輸入有誤，請檢查輸入。";setTimeout(function(t){return e.msg=""},4400)},reset:function(){var e=this;this.loading=!0,this.setUser(null),this.funnel={mark:"",num:null,num_origin:0,member_code:""},setTimeout(function(t){e.loading=!1},400)}}},_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"form-def"},[n("v-row",[n("v-col",{attrs:{cols:"12",sm:5}},[n("label",[e._v("用戶編號")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.funnel.member_code,expression:"funnel.member_code"}],attrs:{type:"text",placeholder:"請輸入用戶的編號"},domProps:{value:e.funnel.member_code},on:{change:e.fetchingUser,input:function(t){t.target.composing||e.$set(e.funnel,"member_code",t.target.value)}}})]),e._v(" "),n("v-col",{attrs:{cols:"12",sm:7}},[n("label",[e._v("所屬用戶")]),e._v(" "),n("div",{staticClass:"fx-l input input-fix fx-l"},[e.user_loading?n("v-icon",{staticClass:"qiong-txt-18 ani-rotate loading"},[e._v("mdi-loading")]):n("p",[e.user?n("span",[n("v-icon",{staticClass:"qiong-txt-16"},[e._v("mdi-account-circle-outline")]),e._v(" "),n("span",[e._v("\n                            "+e._s(e.user.display_name)+"\n                        ")])],1):n("span",[e._v("\n                        無\n                    ")])])],1)])],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",sm:4}},[n("label",{staticClass:"txt-pri"},[e._v("更改等級")]),e._v(" "),n("nav",{staticClass:"input-with-icon"},[n("v-icon",{staticClass:"qiong-txt-15 i-fix"},[e._v("mdi-pen")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.funnel.num,expression:"funnel.num"}],staticClass:"fw-b pl-num",attrs:{type:"number",placeholder:"請輸入新的等級數字"},domProps:{value:e.funnel.num},on:{input:function(t){t.target.composing||e.$set(e.funnel,"num",t.target.value)}}}),e._v(" "),n("span",[e._v("\n                    級\n                ")])],1)]),e._v(" "),n("v-col",{attrs:{cols:"12",sm:8}},[n("label",[e._v("用戶原等級信息")]),e._v(" "),n("div",{staticClass:"input input-fix"},[e.user?n("span",[n("span",{staticClass:"fw-b "},[e._v("\n                        "+e._s(e.user.lp_wallet.rank)+" 級\n                    ")]),e._v(" "),n("span",{staticClass:"txt-sub"},[e._v("\n                        ，擁有"+e._s(e.user.lp_wallet.consecutive_month)+"個月的忠誠度\n                    ")])]):n("span",{staticClass:"sub"},[e._v("(自動檢索)")])])])],1),e._v(" "),n("v-row",[n("v-col",{attrs:{col:"12"}},[n("label",[e._v("備註")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.funnel.mark,expression:"funnel.mark"}],staticClass:"input-bg",attrs:{type:"text",placeholder:"輸入您要備註的文字"},domProps:{value:e.funnel.mark},on:{change:e.validMark,input:function(t){t.target.composing||e.$set(e.funnel,"mark",t.target.value)}}})])],1),e._v(" "),n("widget-user-by-member-code",{ref:"userREF"}),e._v(" "),e.msg?n("div",{staticClass:"pt-3 qiong-txt-16 anime-later"},[n("qiong-space",{attrs:{space:"0.5vw"}}),e._v(" "),n("dialog-alert",[e._v(e._s(e.msg))])],1):e._e()],1)},staticRenderFns:[]};var p=n("VU/8")(d,_,!1,function(e){n("zkcC")},"data-v-04b49b63",null).exports,g={components:{McFormPageLayout:o.a,FMlcForm:p},methods:{reset:function(){this.$refs.formREF.reset()},submit:function(){var e=this.$refs.formREF.submit();e&&this._submit(e.code,{rank:e.num,remark:e.mark})},_submit:function(e,t){var n=this;return i()(a.a.mark(function s(){return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,n.conn.ex_patch(n,"member_rank_edit",t,e);case 2:s.sent&&setTimeout(function(e){return n.$router.push("/home/member_operate/level_change")},600);case 4:case"end":return s.stop()}},s,n)}))()}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mc-form-page-layout",{attrs:{header:"更改會員 LP 等級"},on:{back_Father:function(t){return e.$router.push("/home/member_operate/level_change")}}},[n("div",[n("f-mlc-form",{ref:"formREF"})],1),e._v(" "),n("div",{staticClass:"btn-transfer an_upper qiong-pt-15 qiong-txt-14"},[n("button",{staticClass:"reset",on:{click:e.reset}},[n("v-icon",{staticClass:"qiong-txt-16"},[e._v("mdi-refresh")]),e._v("\n                重置表單\n            ")],1),e._v(" "),n("button",{staticClass:"btn-pri",on:{click:e.submit}},[n("v-icon",{staticClass:"qiong-txt-16 mr-3"},[e._v("mdi-check-underline")]),e._v("\n                提交結果\n            ")],1)])])},staticRenderFns:[]};var b=n("VU/8")(g,h,!1,function(e){n("PGP2")},"data-v-08f74ebc",null);t.default=b.exports},zkcC:function(e,t){}});
//# sourceMappingURL=38.aba4bab160b2d0f6ce44.js.map