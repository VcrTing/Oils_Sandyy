webpackJsonp([32],{iLQy:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("Xxa5"),r=n.n(s),a=n("exGp"),i=n.n(a),o=n("oKCz"),u=n("Vz2W"),c=n("GAjY"),l=n("akmo"),f=n("gBtx"),m=n.n(f),d=n("5dBV"),v=n.n(d),_=n("Gi8X"),p=n("YPBt"),h=n("Um5R"),g=n("Vv01"),b={components:{DateSelect:p.a,WidgetUserByMemberCode:_.a,DialogAlert:g.a,QiongSpace:h.a},props:{hkd:{type:Number,default:0}},data:function(){return{user:null,user_loading:!1,msg:"",funnel:{num:0,to_member_code:""},loading:!0}},mounted:function(){this.reset()},watch:{"funnel.num":function(t,e){t&&(t=v()(t),isNaN(t)&&t<0&&(this.funnel.quantity=0))}},methods:{geneTimed:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24,e=[],n=0;n<t;n++)e.push(n);return e},reciveDate:function(t){var e=this,n=this.view.getToday(),s=this.view.judge_date(t,n);this.funnel.date=s?t:n,s||(this.loading=!0,setTimeout(function(t){e.loading=!1},600))},validHour:function(){},validMark:function(){},validCode:function(){var t=this.funnel.to_member_code;return t=!!((t=m()(t))&&t>=203e3)},validNum:function(){var t=this.funnel.quantity;return t=!((t=!(!(t=m()(t))||0==t))>this.hkd)},fetchingUser:function(){var t=this;return i()(r.a.mark(function e(){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.validCode()){e.next=8;break}return t.user_loading=!0,e.next=4,t.$refs.userREF.fecthingUser(t.funnel.to_member_code);case 4:(n=e.sent)&&t.setUser(n),e.next=9;break;case 8:t.setUser(null);case 9:case"end":return e.stop()}},e,t)}))()},setUser:function(t){var e=this;this.user_loading=!0,this.user=t,setTimeout(function(t){return e.user_loading=!1},400)},alert:function(t){var e=this;this.msg=t,setTimeout(function(t){return e.msg=""},4400)},submit:function(){var t=this;if(this.validCode()){if(this.validNum())return this.funnel;this.msg="檢測到 LP積分數字有誤，請檢查輸入。"}else this.msg="檢測到 用戶編號 為空或輸入有誤，請檢查輸入。";setTimeout(function(e){return t.msg=""},4400)},reset:function(){var t=this;this.loading=!0,this.setUser(null),this.funnel={quantity:null,to_member_code:""},setTimeout(function(e){t.loading=!1},400)}}},x={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"form-def form-transfer"},[n("v-row",[n("v-col",{attrs:{cols:"12",sm:5}},[n("label",[t._v("收款人編號")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.funnel.to_member_code,expression:"funnel.to_member_code"}],attrs:{type:"text",placeholder:"請輸入收款人的編號"},domProps:{value:t.funnel.to_member_code},on:{change:t.fetchingUser,input:function(e){e.target.composing||t.$set(t.funnel,"to_member_code",e.target.value)}}})]),t._v(" "),n("v-col",{attrs:{cols:"12",sm:7}},[n("label",[t._v("收款人")]),t._v(" "),n("div",{staticClass:"fx-l input input-fix fx-l"},[t.user_loading?n("v-icon",{staticClass:"qiong-txt-18 ani-rotate loading"},[t._v("mdi-loading")]):n("p",[t.user?n("span",[n("v-icon",{staticClass:"qiong-txt-16"},[t._v("mdi-account-circle-outline")]),t._v(" "),n("span",[t._v("\n                            "+t._s(t.user.display_name)+"\n                        ")])],1):n("span",[t._v("\n                        無\n                    ")])])],1)])],1),t._v(" "),n("v-row",{staticClass:"transfer-wrapper"},[n("v-col",{attrs:{col:"12",sm:4,cols:"12"}},[n("label",{staticClass:"form-money"},[t._v("轉賬金額")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.funnel.quantity,expression:"funnel.quantity"}],staticClass:"input-transfer",attrs:{type:"number",placeholder:"請輸入正數"},domProps:{value:t.funnel.quantity},on:{input:function(e){e.target.composing||t.$set(t.funnel,"quantity",e.target.value)}}})]),t._v(" "),n("v-col",{attrs:{col:"12",sm:8,cols:"12"}},[n("label",[t._v("我的積分總值")]),t._v(" "),n("div",{staticClass:"input input-fix txt-money fw-b"},[t._v("\n                "+t._s(t.hkd)+"  HKD\n\n                "),t.hkd<=1?n("span",{staticClass:"pl-1"},[t._v("\n                    (您的可用余額過少)\n                ")]):t._e()])])],1),t._v(" "),n("widget-user-by-member-code",{ref:"userREF"}),t._v(" "),t.msg?n("div",{staticClass:"pt-3 qiong-txt-16 anime-later"},[n("qiong-space",{attrs:{space:"0.5vw"}}),t._v(" "),n("dialog-alert",[t._v(t._s(t.msg))])],1):t._e()],1)},staticRenderFns:[]},y=n("VU/8")(b,x,!1,null,null,null).exports,k={components:{McFormPageLayout:l.a,FTmpForm:y,NetFund:c.a,Sign:u.a,QiongLoading:o.a},name:"",data:function(){return{me_hkd:0,loading:!0,doing:!1}},computed:{user:function(){var t=this.$store.state.user_backend;return t||null}},methods:{reset:function(){this.$refs.tmpREF.reset()},unLock:function(){this.doing=!1},submit:function(){var t=this;return i()(r.a.mark(function e(){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.doing){e.next=2;break}return e.abrupt("return");case 2:if(t.doing=!0,!(n=t.$refs.tmpREF.submit())){e.next=9;break}return e.next=7,t.$refs.tsREF.transfer(n);case 7:500==(n=e.sent)?(t.$refs.tmpREF.alert("服务器错误，转账失败！！！"),t.unLock()):400==n?(t.$refs.tmpREF.alert("网络错误，未生成转账任务！！！"),t.unLock()):setTimeout(function(e){t.unLock(),t.$router.push("/home/loyalty/transfer_money")},800);case 9:case"end":return e.stop()}},e,t)}))()},LP:function(){var t=this;return i()(r.a.mark(function e(){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.fundREF.fetching(t.user);case 2:(n=e.sent)&&n.length>0&&(t.me_hkd=n[0].wallet),setTimeout(function(){t.loading=!1},600);case 5:case"end":return e.stop()}},e,t)}))()}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mc-form-page-layout",{attrs:{header:"轉賬",no_switch:!0},on:{back_Father:function(e){return t.$router.push("/home/loyalty/transfer_money")}}},[n("div",{staticClass:"py-3"},[n("div",{staticClass:"t-r pb-3"},[n("a",{staticClass:"a-sus",on:{click:function(e){return t.$router.push("/home/user/enroller")}}},[t._v("我的Enroller下線")]),n("a",[t._v("，")]),t._v(" "),n("a",{staticClass:"a-sus",on:{click:function(e){return t.$router.push("/home/user/sponsor")}}},[t._v("我的Sponsor下線")])]),t._v(" "),t.loading?n("qiong-loading"):n("f-tmp-form",{ref:"tmpREF",attrs:{hkd:t.me_hkd}})],1),t._v(" "),n("div",{staticClass:"fx-c my-3 qiong-pt-15 qiong-txt-14 anime-later anilay-XL"},[n("button",{staticClass:"fm-submit mx-3 px-5 py-1 round",on:{click:t.submit}},[n("v-icon",{staticClass:"qiong-txt-16 mr-2"},[t._v("mdi-check-underline")]),t._v("\n                提交結果\n            ")],1),t._v(" "),n("button",{staticClass:"mx-3 px-5 py-1 reset round",on:{click:t.reset}},[n("v-icon",{staticClass:"qiong-txt-16"},[t._v("mdi-refresh")]),t._v("\n                重置表單\n            ")],1)]),t._v(" "),n("net-fund",{ref:"fundREF"}),t._v(" "),n("net-transfer",{ref:"tsREF"}),t._v(" "),t.user?n("sign",{on:{sign_Father:t.LP}}):t._e()],1)},staticRenderFns:[]};var w=n("VU/8")(k,C,!1,function(t){n("zcpD")},"data-v-e9d35f20",null);e.default=w.exports},zcpD:function(t,e){}});
//# sourceMappingURL=32.90a8701bf96caa91db7d.js.map